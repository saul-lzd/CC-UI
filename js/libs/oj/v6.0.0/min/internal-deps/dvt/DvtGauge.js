/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtAxis'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

!function(t){var e=function(){};t.Obj.createSubclass(e,t.BaseComponent),e._DEFAULT_MIN_VALUE=0,e._DEFAULT_MAX_VALUE=100,e.prototype.Init=function(a,i,n,r){e.superclass.Init.call(this,a,i,n),a.getStage().setCursor(""),this._bStaticRendering=r,this._bStaticRendering||(this.EventManager=this.CreateEventManager(),this.EventManager.addListeners(this),t.Agent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager)),this.setId("gauge1000"+Math.floor(1e9*Math.random())),this._editingOverlay=new t.Rect(a,0,0),this._editingOverlay.setInvisibleFill(),this.addChild(this._editingOverlay)),this._bEditing=!1,this._bResizeRender=!1,this._oldValue=null},e.prototype.SetOptions=function(e){this.Options=e,t.Agent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none"),t.Agent.isPlatformIE()&&"auto"==this.Options.visualEffects&&(this.Options.visualEffects="none"),e.className&&(this.Options.svgClassName=e.className),e.style&&(this.Options.svgStyle=e.style)},e.prototype.render=function(a,i,n){if(a?this.SetOptions(a):this.Options||this.SetOptions(null),this.Options.thresholds){var r=this.Options.thresholds;this.Options.thresholds=r.sort(e._thresholdComparator)}"number"==typeof i&&"number"==typeof n&&(0!=this.Width&&this.Width!=i||0!=this.Height&&this.Height!=n?this._bResizeRender=!0:this._bResizeRender=!1,this.Width=i,this.Height=n);var s=this.__shapes;this.__shapes=[];var o=new t.Container(this.getCtx());if(this.addChildAt(o,0),this.Render(o,this.Width,this.Height),this._setAnimation(o,null!=a,s,this.Width,this.Height),this._editingOverlay&&(this._editingOverlay.setWidth(this.Width),this._editingOverlay.setHeight(this.Height),this.getEventManager().associate(this._editingOverlay,this.__getLogicalObject(),!0)),this.UpdateAriaAttributes(),!this._bStaticRendering&&!this.Options.readOnly){o.setAriaRole("slider"),o.setAriaProperty("valuemin",this.Options.min),o.setAriaProperty("valuemax",this.Options.max);var h=l.getFormattedMetricLabel(this.Options.value,this);o.setAriaProperty("valuenow",h);var g=l.getTooltipString(this);t.Agent.isTouchDevice()&&(this._container.setAriaProperty("live","assertive"),h!=g&&(g=h+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+g)),h!=g&&o.setAriaProperty("label",g),this._renderCount=null!=this._renderCount?this._renderCount+1:0;var c=this.getId()+"_"+this._renderCount;o.setId(c),this.getCtx().setActiveElement(o)}this.Options._selectingCursor&&this.setCursor(t.SelectionEffectUtils.getSelectingCursor()),this.Animation||this.RenderComplete()},e.prototype.__getLogicalObject=function(){var e=this.Options.tooltip,a=e?e.renderer:null,i=o.getColor(this);if(a){var n={component:this.Options._widgetConstructor,label:l.getFormattedMetricLabel(this.Options.value,this),color:i};return new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),a,i,n)}var r=l.getTooltipString(this);return new t.SimpleObjPeer(null,r,i)},e.prototype.Render=function(t,e,a){},e.prototype._setAnimation=function(e,a,i,n,r){this.StopAnimation();var s=!1,o=this._bEditing||this._bResizeRender?"none":this.getOptions().animationOnDataChange,l=this._bEditing||this._bResizeRender?"none":this.getOptions().animationOnDisplay,h=t.StyleUtils.getTimeMilliseconds(this.getOptions().animationDuration)/1e3;if(l||o){var g=new t.Rectangle(0,0,n,r),c=this.getCtx();this._container||"none"===l||null==this.__shapes[0]?this._container&&"none"!=o&&a&&null!=this.__shapes[0]&&(this.Animation=t.BlackBoxAnimationHandler.getCombinedAnimation(c,o,this._container,e,g,h),this.Animation?s=!0:this.Animation=this.CreateAnimationOnDataChange(i,this.__shapes,l,h)):(this.Animation=t.BlackBoxAnimationHandler.getInAnimation(c,l,e,g,h),this.Animation||(this.Animation=this.CreateAnimationOnDisplay(this.__shapes,l,h))),!s&&this._container&&(this.removeChild(this._container),this._container.destroy()),this.Animation&&(this.Animation.play(),this.Animation.setOnEnd(this._onAnimationEnd,this)),s&&(this._oldContainer=this._container),this._container=e}},e.prototype.CreateAnimationOnDisplay=function(t,e,a){return null},e.prototype.CreateAnimationOnDataChange=function(e,a,i,n){for(var r=[],s=0;s<e.length;s++){var o=e[s],l=a[s],h=o.getAnimationParams(),g=l.getAnimationParams();l.setAnimationParams(h);var c=new t.CustomAnimation(this.getCtx(),l,n);c.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,l,l.getAnimationParams,l.setAnimationParams,g),r.push(c)}return new t.ParallelPlayable(this.getCtx(),r)},e.prototype.GetValueAt=function(t,e){return null},e.prototype.renderUpdate=function(){this.render(),this.UpdateAriaLiveValue(this._container)},e.prototype.UpdateAriaLiveValue=function(e,a){a=l.getFormattedMetricLabel(a||this.Options.value,this),e.setAriaProperty("valuenow",a),t.Agent.isTouchDevice()&&e.setAriaProperty("label",a)},e.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer.destroy(),this._oldContainer=null),this.AnimationStopped||this.RenderComplete(),this.Animation=null,this.AnimationStopped=!1},e.prototype.__processValueChangeStart=function(t,e){this._bEditing=!0,this._oldValue=this.Options.value,this.__processValueChangeMove(t,e)},e.prototype.__processValueChangeMove=function(e,a){if(null!=this._oldValue){var i=l.adjustForStep(this.Options,this.GetValueAt(e,a));i!=this.Options.value&&(this.Options.value=i,this.renderUpdate(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this._oldValue,this.Options.value,!1)))}},e.prototype.__processValueChangeEnd=function(e,a){if(this.__processValueChangeMove(e,a),t.Agent.isTouchDevice()){var i=l.getFormattedMetricLabel(this.Options.value,this),n=l.getTooltipString(this);i!=n&&(n=i+t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"ARIA_LABEL_DESC_DELIMITER")+n,this._container.setAriaProperty("label",n))}this.dispatchEvent(t.EventFactory.newValueChangeEvent(this._oldValue,this.Options.value,!0)),this._bEditing=!1,this._oldValue=null},e.prototype.__increaseValue=function(){if(!this.Options.readOnly){var e=this.Options.value;if(null!=this.Options.step){var a=this.Options.value+this.Options.step;this.Options.value=l.adjustForStep(this.Options,a)}else{var i=(this.Options.max-this.Options.min)/100;this.Options.value=Math.min(Math.max(this.Options.value+i,this.Options.min),this.Options.max)}this.renderUpdate(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(e,this.Options.value,!1))}},e.prototype.__decreaseValue=function(){if(!this.Options.readOnly){var e=this.Options.value;if(null!=this.Options.step){var a=this.Options.value-this.Options.step;this.Options.value=l.adjustForStep(this.Options,a)}else{var i=(this.Options.max-this.Options.min)/100;this.Options.value=Math.min(Math.max(this.Options.value-i,this.Options.min),this.Options.max)}this.renderUpdate(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(e,this.Options.value,!1))}},e.prototype.CreateEventManager=function(){return new r(this)},e._thresholdComparator=function(t,e){return null!=t.max&&null!=e.max?t.max-e.max:t.max?-1/0:1/0},e.prototype.getAutomation=function(){return new a(this)},e.prototype.CreateKeyboardHandler=function(t){return new s(t,this)},e.prototype.GetComponentDescription=function(){return t.Bundle.getTranslation(this.getOptions(),"componentName",t.Bundle.UTIL_PREFIX,"GAUGE")},e.prototype.UpdateAriaAttributes=function(){if(!this._bStaticRendering){var e=l.getTooltipString(this);this.IsParentRoot()?this.Options.readOnly?(this.getCtx().setAriaRole("img"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),e?[e]:null)]))):(this.getCtx().setAriaRole("application"),this.getCtx().setAriaLabel(t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"DATA_VISUALIZATION"),t.StringUtils.processAriaLabel(this.GetComponentDescription())]))):this.Options.readOnly&&(this.setAriaRole("img"),this.setAriaProperty("label",t.Displayable.generateAriaLabel(t.StringUtils.processAriaLabel(this.GetComponentDescription()),e?[e]:null)))}};var a=function(t){this._gauge=t};t.Obj.createSubclass(a,t.Automation),a.prototype.getDomElementForSubId=function(e){if(e==t.Automation.TOOLTIP_SUBID)return this.GetTooltipElement(this._gauge);if(0==e.indexOf("item")){var a=e.indexOf("["),i=e.indexOf("]");if(a>0&&i>0){var n=e.substring(a+1,i),r=this._gauge.__getRatingGaugeItem(n);if(r)return r.getElem()}}return null},a.prototype.GetSubIdForDomElement=function(t){for(var e=this._gauge.getOptions(),a=0;a<e.max;a++){if(this._gauge.__getRatingGaugeItem(a)==t)return"item["+a+"]"}return null},a.prototype.getValue=function(){return this._gauge.getOptions().value},a.prototype.getMetricLabel=function(){return l.getFormattedMetricLabel(this.getValue(),this._gauge)},t.Bundle.addDefaultStrings(t.Bundle.GAUGE_PREFIX,{});var i=function(){};t.Obj.createSubclass(i,t.BaseComponentDefaults),i.SKIN_ALTA={skin:t.CSSStyle.SKIN_ALTA,color:"#393737",metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA),label:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},_thresholdColors:["#ed6647","#fad55c","#68c182"]},i.VERSION_1={skin:t.CSSStyle.SKIN_SKYROS,min:0,max:100,center:{},color:"#313842",borderColor:null,visualEffects:"auto",emptyText:null,animationOnDataChange:"none",animationOnDisplay:"none",animationDuration:500,readOnly:"true",metricLabel:{rendered:"auto",scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),textType:"number"},_statusMessageStyle:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),label:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),position:"auto"},_thresholdColors:["#D62800","#FFCF21","#84AE31"],__layout:{outerGap:1,labelGap:5}},i.prototype.Init=function(e){var a={skyros:t.JsonUtils.merge(e.skyros,i.VERSION_1),alta:t.JsonUtils.merge(e.alta,i.SKIN_ALTA)};i.superclass.Init.call(this,a)},i.isSkyrosSkin=function(e){return e.getOptions().skin==t.CSSStyle.SKIN_SKYROS},i.prototype.getAnimationDuration=function(t){return t.animationDuration};var n=new Object;t.Obj.createSubclass(n,t.Obj),n.hasData=function(t){var e=t.getOptions();return e&&null!=e.value&&n.hasValidData(t)},n.hasValidData=function(t){var e=t.getOptions();return Number(e.min)<Number(e.max)},n.getValueThresholdIndex=function(t,e){var a=t.getOptions(),i=null!=e?e:a.value,n=a.thresholds;if(!n)return-1;for(var r=0;r<n.length;r++)if(i<=n[r].max)return r;return n.length-1},n.getThreshold=function(t,e){var a=t.getOptions().thresholds;return a&&e>=0&&e<a.length?a[e]:null},n.getReferenceObject=function(t,e){var a=t.getOptions().referenceLines;return a&&e>=0&&e<a.length?a[e]:null};var r=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._gauge=t,this.IsMouseEditing=!1};t.Obj.createSubclass(r,t.EventManager),r.prototype.OnMouseDown=function(t){if(!1===this._gauge.getOptions().readOnly){this.IsMouseEditing=!0,this.hideTooltip();var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeStart(e.x,e.y),t.preventDefault()}else r.superclass.OnMouseDown.call(this,t)},r.prototype.OnMouseUp=function(t){if(this.IsMouseEditing){this.IsMouseEditing=!1;var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeEnd(e.x,e.y)}else r.superclass.OnMouseUp.call(this,t)},r.prototype.OnMouseMove=function(t){if(this.IsMouseEditing){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeMove(e.x,e.y)}!this.IsShowingTooltipWhileEditing()&&this.IsMouseEditing||r.superclass.OnMouseMove.call(this,t)},r.prototype.IsShowingTooltipWhileEditing=function(){return!1},r.prototype.PreEventBubble=function(e){if(t.TouchEvent.TOUCHSTART===e.type&&!1===this._gauge.getOptions().readOnly){this.IsMouseEditing=!0;var a=this.GetRelativePosition(e.touches[0].pageX,e.touches[0].pageY);this._gauge.__processValueChangeStart(a.x,a.y),e.preventDefault()}else if(t.TouchEvent.TOUCHMOVE===e.type&&this.IsMouseEditing){a=this.GetRelativePosition(e.touches[0].pageX,e.touches[0].pageY);this._gauge.__processValueChangeMove(a.x,a.y),e.preventDefault()}else if(t.TouchEvent.TOUCHEND===e.type&&this.IsMouseEditing){this.IsMouseEditing=!1;a=this.GetRelativePosition(e.changedTouches[0].pageX,e.changedTouches[0].pageY);this._gauge.__processValueChangeEnd(a.x,a.y),e.preventDefault()}this.IsMouseEditing&&!this.IsShowingTooltipWhileEditing()||r.superclass.PreEventBubble.call(this,e)},r.prototype.ProcessKeyboardEvent=function(e){if(!this.KeyboardHandler)return!1;this.KeyboardHandler.processKeyDown(e);var a=e.keyCode;if(a==t.KeyboardEvent.UP_ARROW||a==t.KeyboardEvent.LEFT_ARROW||a==t.KeyboardEvent.DOWN_ARROW||a==t.KeyboardEvent.RIGHT_ARROW||a==t.KeyboardEvent.TAB){var i=this._gauge.getCtx().getStageAbsolutePosition();this.ProcessObjectTooltip(e,i.x,i.y,this._gauge.__getLogicalObject(),this._gauge)}return!1},r.prototype.OnBlur=function(t){r.superclass.OnBlur.call(this,t),this.hideTooltip()},r.prototype.GetRelativePosition=function(t,e){var a=this.getCtx().pageToStageCoords(t,e);return this._gauge.stageToLocal(a)},r.prototype.UpdateActiveElement=function(t,e){},r.prototype.__isMouseEditing=function(){return this.IsMouseEditing};var s=function(t,e){this.Init(t,e)};t.Obj.createSubclass(s,t.KeyboardHandler),s.prototype.Init=function(t,e){s.superclass.Init.call(this,t),this._gauge=e},s.prototype.processKeyDown=function(e){var a=e.keyCode,i=t.Agent.isRightToLeft(this._gauge.getCtx()),n=this._gauge.getOptions().value;this._gauge.getOptions().readOnly||(a!=t.KeyboardEvent.TAB||this._bEditing?a==t.KeyboardEvent.UP_ARROW||a==(i?t.KeyboardEvent.LEFT_ARROW:t.KeyboardEvent.RIGHT_ARROW)?(this._gauge.__increaseValue(),t.EventManager.consumeEvent(e)):a==t.KeyboardEvent.DOWN_ARROW||a==(i?t.KeyboardEvent.RIGHT_ARROW:t.KeyboardEvent.LEFT_ARROW)?(this._gauge.__decreaseValue(),t.EventManager.consumeEvent(e)):!this._bEditing||a!=t.KeyboardEvent.ENTER&&a!=t.KeyboardEvent.TAB||this._oldValue==n||(this._gauge.dispatchEvent(t.EventFactory.newValueChangeEvent(this._oldValue,n,!0)),a==t.KeyboardEvent.TAB?(this._bEditing=!1,this._oldValue=null):this._oldValue=n):(this._bEditing=!0,this._oldValue=n))};var o=new Object;t.Obj.createSubclass(o,t.Obj),o._THRESHOLD_COLOR_RAMP=["#ed6647","#fad55c","#68c182"],o._SKYROS_THRESHOLD_COLOR_RAMP=["#D62800","#FFCF21","#84AE31"],o._ALTA_CIRCLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:80,y:86,width:40,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},o._ALTA_DOME={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},o._ALTA_RECTANGLE={startAngle:202.5,angleExtent:225,anchorX:100,anchorY:103,metricLabelBounds:{x:83,y:86,width:34,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},o._ANTIQUE_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:82,y:133,width:36,height:34},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:61,majorTickCount:6},o._ANTIQUE_DOME={startAngle:195.5,angleExtent:210.8,anchorX:100,anchorY:100,metricLabelBounds:{x:84,y:135,width:32,height:35},indicatorLength:.98,tickLabelHeight:20,tickLabelWidth:30,radius:63,majorTickCount:6},o._ANTIQUE_RECTANGLE={startAngle:207.6,angleExtent:235,anchorX:100,anchorY:95.8,metricLabelBounds:{x:83,y:125,width:34,height:40},indicatorLength:1.05,tickLabelHeight:20,tickLabelWidth:30,radius:64,majorTickCount:6},o._LIGHT_CIRCLE={startAngle:220.5,angleExtent:261.1,anchorX:100,anchorY:100,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.82,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},o._LIGHT_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:70,width:41,height:39},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6},o._LIGHT_RECTANGLE={startAngle:211,angleExtent:242,anchorX:100,anchorY:91.445,metricLabelBounds:{x:78,y:75,width:44,height:38},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},o._DARK_CIRCLE={startAngle:220.5,angleExtent:261.5,metricLabelBounds:{x:80,y:82,width:40,height:40},indicatorLength:.85,tickLabelHeight:20,tickLabelWidth:30,radius:60,majorTickCount:6},o._DARK_DOME={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:89,metricLabelBounds:{x:80,y:73,width:40,height:36},indicatorLength:1.23,tickLabelHeight:20,tickLabelWidth:30,radius:56,majorTickCount:6},o._DARK_RECTANGLE={startAngle:201,angleExtent:222,anchorX:100.2,anchorY:99.5,metricLabelBounds:{x:80,y:83,width:41,height:36},indicatorLength:1.1,tickLabelHeight:20,tickLabelWidth:30,radius:58,majorTickCount:6},o._ANTIQUE_INDICATOR={anchorX:42,anchorY:510},o._ALTA_INDICATOR={anchorX:187,anchorY:388},o._LIGHT_INDICATOR={anchorX:227,anchorY:425},o._DARK_INDICATOR={anchorX:227,anchorY:425},o.getColor=function(e){var a=e.getOptions(),i=n.getValueThresholdIndex(e),r=n.getThreshold(e,i);return!r||e instanceof t.StatusMeterGauge&&!(e instanceof t.StatusMeterGauge&&"onIndicator"==a.thresholdDisplay)?a.color:o.getThresholdColor(e,r,i)},o.getBorderColor=function(e){var a=e.getOptions(),i=n.getValueThresholdIndex(e),r=n.getThreshold(e,i);return r&&r.borderColor&&(!(e instanceof t.StatusMeterGauge)||e instanceof t.StatusMeterGauge&&"onIndicator"==a.thresholdDisplay)?r.borderColor:a.borderColor},o.getPlotAreaColor=function(e){var a=e.getOptions(),i=n.getValueThresholdIndex(e),r=n.getThreshold(e,i);return!r||e instanceof t.StatusMeterGauge&&!(e instanceof t.StatusMeterGauge&&"onIndicator"!=a.thresholdDisplay)?a.plotArea.color:o.getThresholdColor(e,r,i)},o.getPlotAreaBorderColor=function(e){var a=e.getOptions(),i=a.plotArea.borderColor;return e instanceof t.StatusMeterGauge&&"circular"!=a.orientation&&null==i?"skyros"==a.skin?"#C6C6C6":"#D6DFE6":i},o.getThresholdColor=function(t,e,a){if(e.color)return e.color;var i=t.getOptions(),n=a%i._thresholdColors.length;return i._thresholdColors[n]},o.getDialBackground=function(t){return"rectangleAlta"===t?o._ALTA_RECTANGLE:"domeAlta"===t?o._ALTA_DOME:"circleAntique"===t?o._ANTIQUE_CIRCLE:"rectangleAntique"===t?o._ANTIQUE_RECTANGLE:"domeAntique"===t?o._ANTIQUE_DOME:"circleLight"===t?o._LIGHT_CIRCLE:"rectangleLight"===t?o._LIGHT_RECTANGLE:"domeLight"===t?o._LIGHT_DOME:"circleDark"===t?o._DARK_CIRCLE:"rectangleDark"===t?o._DARK_RECTANGLE:"domeDark"===t?o._DARK_DOME:o._ALTA_CIRCLE},o.getDialIndicator=function(t){return"needleAntique"===t?o._ANTIQUE_INDICATOR:"needleLight"===t?o._LIGHT_INDICATOR:"needleDark"===t?o._DARK_INDICATOR:o._ALTA_INDICATOR},o.hasLabel=function(t){return!!t.label.text};var l=new Object;t.Obj.createSubclass(l,t.Obj),l.renderEmptyText=function(e,a,i){var r=e.getOptions(),s=r.emptyText;s||(s=t.Bundle.getTranslation(r,"labelNoData",t.Bundle.UTIL_PREFIX,"NO_DATA",null)),n.hasValidData(e)||(s=t.Bundle.getTranslation(r,"labelInvalidData",t.Bundle.UTIL_PREFIX,"INVALID_DATA",null));var o=r._statusMessageStyle;if(o.getStyle("font-size")||o.setStyle("font-size","13px"),e instanceof t.StatusMeterGauge){var l=o.getStyle("color");l=l||"#333333",o.setStyle("color",l)}t.TextUtils.renderEmptyText(a,s,new t.Rectangle(i.x,i.y,i.w,i.h),e.getEventManager(),o)},l.getFormattedMetricLabel=function(t,e){var a=e.getOptions();if(a.metricLabel.text)return a.metricLabel.text;var i=a.metricLabel.converter,n=a.metricLabel.scaling,r=a.metricLabel.autoPrecision?a.metricLabel.autoPrecision:"on",s="percent"==a.metricLabel.textType;return l._formatMetricLabelValue(t,e,i,n,r,s)},l.formatTickLabelValue=function(t,e){var a=e.getOptions(),i=null,n="percent"==a.tickLabel.textType;"on"==a.tickLabel.rendered&&a.tickLabel.converter&&(i=a.tickLabel.converter);var r=null;"on"==a.tickLabel.rendered&&a.tickLabel.scaling&&(r=a.tickLabel.scaling);var s=a.tickLabel.autoPrecision?a.tickLabel.autoPrecision:"on";return l._formatMetricLabelValue(t,e,i,r,s,n)},l._formatMetricLabelValue=function(e,a,i,n,r,s){var o,h=a.getOptions(),g=h.min,c=h.max,u=c-g,d=u<1e3?100:1e3,p=null;isNaN(u)||(p=u/d),s&&(e=l.getFillPercentage(h,h.min,h.max,e,!0));var _=new t.LinearScaleAxisValueFormatter(a.getCtx(),g,c,p,n,r);if(i&&i.getAsString)o=_.format(e,i);else if(i&&i.format)o=_.format(e,i);else if(s){var y=a.getCtx().getNumberConverter({style:"percent",maximumFractionDigits:0,minimumFractionDigits:0});o=y&&y.format?y.format(e):String(Math.round(100*e))+"%"}else o=_.format(e);return o},l.getFillPercentage=function(t,e,a,i,n){var r=(i-e)/(t.max-t.min);return r=n?r:Math.min(Math.max(0,r),1)},l.getTooltipString=function(e){var a=e.getOptions(),i=n.getValueThresholdIndex(e),r=n.getThreshold(e,i),s=l.getFormattedMetricLabel(a.value,e);return r&&null!=r.shortDesc?r.shortDesc:null!=a.shortDesc?a.shortDesc:a.label.text?t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[a.label.text,s]):s},l.renderMetricLabel=function(e,a,i,n,r,s,o){var h=e.getOptions(),g=!1;if("on"==h.metricLabel.rendered||o&&"off"!=h.metricLabel.rendered){var c=l.getFormattedMetricLabel(h.value,e),u=l.getFormattedMetricLabel(h.min,e),d=l.getFormattedMetricLabel(h.max,e),p=new t.OutputText(e.getCtx(),c,i.x+i.w/2,i.y+i.h/2);p.setCSSStyle(h.metricLabel.style);var _=h.metricLabel.style.getStyle("font-size");_||(_=l.calcLabelFontSize([c,u,d],p,i),p.setTextString(c),p.setFontSize(_)),"top"==s?(p.setY(i.y),p.alignTop()):"middle"==s?t.TextUtils.centerTextVertically(p,i.y+i.h/2):"bottom"==s&&(p.setY(i.y+i.h),p.alignBottom()),"center"==r?p.alignCenter():"left"==r?(p.setX(i.x),p.alignLeft()):"right"==r&&(p.setX(i.x+i.w),p.alignRight()),null!=n&&p.setSolidFill(n),g=t.TextUtils.fitText(p,i.w,i.h,a)}return g},l.renderLabel=function(e,a,i,n,r){var s=e.getOptions(),l=!1;if(o.hasLabel(s)){var h=s.label.text,g=s.label.style,c=new t.MultilineText(e.getCtx(),h),u=g.clone();c.setCSSStyle(g);var d=g.getStyle("font-size")||t.TextUtils.getOptimalFontSize(c.getCtx(),c.getTextString(),c.getCSSStyle(),i);u.setFontSize("font-size",d),null!=n&&u.setStyle("color",n),c.setCSSStyle(u),l=t.TextUtils.fitText(c,i.w,i.h,e);var p=c.getDimensions().h;"top"==r?c.setY(i.y):"bottom"==r?c.setY(i.y+i.h-p):c.setY(i.y+i.h/2-p/2),c.setX(i.x+i.w/2),c.alignCenter(),a.addChild(c)}return l},l.calcLabelFontSize=function(e,a,i){for(var n=0,r=null,s=0,o=0;o<e.length;o++)a.setTextString(e[o]),(s=a.getDimensions().w)>n&&(r=e[o],n=s);return a.setTextString(r),t.TextUtils.getOptimalFontSize(a.getCtx(),a.getTextString(),a.getCSSStyle(),i)},l.adjustForStep=function(t,e){var a=Number(t.step);if(a&&a>0){var i=e/a;if(i<.5)return t.min;var n=Math.ceil(i)*a;return Math.max(Math.min(t.max,n),t.min)}return e},t.LedGauge=function(){},t.Obj.createSubclass(t.LedGauge,e),t.LedGauge.newInstance=function(e,a,i,n){var r=new t.LedGauge;return r.Init(e,a,i,n),r},t.LedGauge.prototype.Init=function(e,a,i,n){t.LedGauge.superclass.Init.call(this,e,a,i,n),this.Defaults=new h},t.LedGauge.prototype.SetOptions=function(e){(e=t.JsonUtils.clone(e)).title&&(e.label=e.title),t.LedGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e)),"auto"==this.Options.animationOnDisplay&&(this.Options.animationOnDisplay="zoom"),"auto"==this.Options.animationOnDataChange&&(this.Options.animationOnDataChange="alphaFade"),this.Options.readOnly=!0},t.LedGauge.prototype.Render=function(t,e,a){g.render(this,t,e,a)};var h=function(){this.Init({skyros:h.VERSION_1,alta:{}})};t.Obj.createSubclass(h,i),h.VERSION_1={type:"circle"};var g=new Object;t.Obj.createSubclass(g,t.Obj),g._SKYROS_SHAPE_TRIANGLE_CMDS="M-42,36.6Q-50,36.6,-46.54,28.6L-4,-43.07Q0,-50,4,-43.07L46.54,28.6Q50,36.6,42,36.6Z",g._SHAPE_TRIANGLE_CMDS=[-50,36.6,0,-50,50,36.6],g._SKYROS_SHAPE_TRIANGLE_INNER_CMDS=[-50,36.6,0,-50,50,36.6],g._SKYROS_SHAPE_STAR_CMDS=[-13.05,-12.94,-50,-11.13,-21.06,11.9,-30.74,47.6,.1,27.18,31.06,47.44,21.17,11.79,50,-11.39,13.05,-13.01,-.06,-47.59],g._SHAPE_STAR_CMDS=[-50,-11.22,-16.69,-17.94,0,-47.55,16.69,-17.94,50,-11.22,26.69,13.8,30.9,47.56,0,33.42,-30.9,47.56,-26.69,13.8],g._SKYROS_SHAPE_ARROW_CMDS="M0,45L21,45Q24.414,44.414,25,41L25,10L42,10Q48.5,9.1,45,4L2,-38Q0,-39,-2,-38L-45,4Q-48.5,9.1,-42,10L-25,10L-25,41Q-24.414,44.414,-21,45Z",g._SHAPE_ARROW_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48],g._SKYROS_SHAPE_ARROW_INNER_CMDS=[25,48,25,8,47.5,8,0,-39,-47.5,8,-25,8,-25,48],g._SHAPE_HUMAN_CMDS="M -0.06059525142297417 -50.86842065108466 C -11.4496388584463 -50.86842065108466 -20.708163169810554 -39.024253028220556 -20.708163169810554 -24.413724255650386 C -20.708163169810554 -9.803195483080515 -11.4496388584463 2.040972139783591 -0.06059525142297417 2.040972139783591 C 11.328499974520241 2.040972139783591 20.586972666964613 -9.803195483080515 20.586972666964613 -24.413724255650386 C 20.586972666964613 -39.024253028220556 11.328499974520241 -50.86842065108466 -0.06059525142297417 -50.86842065108466 z M -23.93434565705865 -2.959610715450779 C -30.908061721494278 3.3998402034127153 -42.00096758564793 18.817121073473572 -38.77478509839983 33.65756051481475 C -20.651382358034887 47.30044101688934 14.372054723529814 49.13162219665128 39.298831093003386 32.85101489300273 C 40.26410489318826 16.477493533721187 32.34060070450674 4.7883891459240715 23.167918656763206 -2.959610715450779 C 11.553661702670112 21.074158341552575 -11.029615708066558 16.237465556670102 -23.93434565705865 -2.959610715450779 z ",g.render=function(e,a,i,r){if(n.hasData(e)){var s=e.getOptions(),h=s.__layout.outerGap,c=s&&(s.size>=0||s.size<1)?Math.sqrt(s.size):1,u=new t.Rectangle(h+(i-2*h)*(1-c)/2,h+(r-2*h)*(1-c)/2,(i-2*h)*c,(r-2*h)*c);g._renderShape(e,a,u),g._renderVisualEffects(e,a,u);var d=!1,p=t.ColorUtils.getContrastingTextColor(o.getColor(e));if(o.hasLabel(s)){var _="middle",y=g._getMetricLabelBounds(e,a,u);"on"==s.metricLabel.rendered&&(y.y=y.y+.6*y.h,y.h=.4*y.h,_="top"),d=t.Agent.isHighContrast()||null==s.label.style.getStyle("color")?l.renderLabel(e,a,y,p,_):l.renderLabel(e,a,y,null,_)}if("on"==s.metricLabel.rendered){var m=g._getMetricLabelBounds(e,a,u),v="middle";d&&(m.h=.55*m.h,v="bottom"),t.Agent.isHighContrast()||null==s.metricLabel.style.getStyle("color")?l.renderMetricLabel(e,a,m,p,"center",v):l.renderMetricLabel(e,a,m,null,"center",v)}}else l.renderEmptyText(e,a,new t.Rectangle(0,0,i,r))},g._renderShape=function(e,a,n){var r,s,l=e.getCtx(),h=e.getOptions(),c=h.type,u=o.getColor(e),d=o.getBorderColor(e),p=n.x+n.w/2,_=n.y+n.h/2,y=Math.min(n.w,n.h)/2,m=i.isSkyrosSkin(e);g._cache||(g._cache=new t.Cache(50));var v=Math.min(n.w/100,n.h/100);if("square"==c)r=new t.Rect(l,p-y,_-y,2*y,2*y);else if("rectangle"==c)r=new t.Rect(l,n.x,n.y,n.w,n.h);else if("diamond"==c)r=new t.Polygon(l,[p-y,_,p,_-y,p+y,_,p,_+y]);else if("circle"==c)r=new t.Circle(l,p,_,y);else{if("star"==c)s=m?g._SKYROS_SHAPE_STAR_CMDS:g._SHAPE_STAR_CMDS;else if("triangle"==c)s=m?g._SKYROS_SHAPE_TRIANGLE_CMDS:g._SHAPE_TRIANGLE_CMDS;else if("arrow"==c)s=m?g._SKYROS_SHAPE_ARROW_CMDS:g._SHAPE_ARROW_CMDS;else if("human"==c)s=g._SHAPE_HUMAN_CMDS;else if(!(s=g._cache.get(c))){r=new t.Path(l,c);var C=t.DisplayableUtils.getDimForced(l,r),S=100/Math.max(C.w,C.h);s=t.PathUtils.transformPath(r.getCommandsArray(),-S*(C.x+C.w/2),-S*(C.y+C.h/2),S,S),g._cache.put(c,s)}(m||"triangle"!=c&&"arrow"!=c)&&"star"!=c?(s=t.PathUtils.transformPath(t.PathUtils.createPathArray(s),n.x+n.w/2,n.y+n.h/2,v,v),r=new t.Path(l,s)):(s=t.PolygonUtils.scale(s,v,v),s=t.PolygonUtils.translate(s,n.x+n.w/2,n.y+n.h/2),r=new t.Polygon(l,s))}if(m||"none"==h.visualEffects)r.setSolidFill(u);else{var b=[t.ColorUtils.adjustHSL(u,0,-.09,.04),t.ColorUtils.adjustHSL(u,0,-.04,-.05)],f=h&&h.rotation%90==0?h.rotation:0,x="arrow"==c||"star"==c||"triangle"==c?f-90:270;r.setFill(new t.LinearGradientFill(x,b,[1,1],[0,1]))}d&&r.setSolidStroke(d),r.setClassName(h.svgClassName),r.setStyle(h.svgStyle),(f=m?h.rotation+90:h.rotation)&&("arrow"==c||"triangle"==c||r instanceof t.Path&&"human"!=c)&&(r=g._rotate(e,a,r,n)),a.addChild(r)},g._rotate=function(e,a,i,n){var r=e.getOptions(),s=new t.Container(e.getCtx());a.addChild(s),s.addChild(i);var o=r&&r.rotation%90==0?r.rotation:0,l=new t.Matrix;l.rotate(Math.PI*o/180),i.setMatrix(l);var h=s.getDimensions(),g=n.x+n.w/2-(h.x+h.w/2),c=n.y+n.h/2-(h.y+h.h/2),u=new t.Matrix;return u.translate(g,c),s.setMatrix(u),s},g._renderVisualEffects=function(t,e,a){var n=t.getOptions(),r=n.type;"none"!=n.visualEffects&&i.isSkyrosSkin(t)&&("circle"==r?g._renderOverlayCircle(t,e,a):"diamond"==r?g._renderOverlayDiamond(t,e,a):"triangle"==r?g._renderOverlayTriangle(t,e,a):"arrow"==r?g._renderOverlayArrow(t,e,a):g._renderOverlayRectangle(t,e,a))},g._renderOverlayRectangle=function(e,a,i){var n=.04*i.w,r=.04*i.h,s=new t.Rectangle(i.x+n,i.y+r,i.w-2*n,i.h-2*r),o=new t.Rect(e.getCtx(),s.x,s.y,s.w,s.h);o.setMouseEnabled(!1),a.addChild(o);var l=new t.LinearGradientFill(270,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[.75,.5,.15,0,.2,.4,.2],[0,.05,.4,.6,.8,.9,1]);o.setFill(l)},g._renderOverlayDiamond=function(e,a,i){var n=.05*i.w,r=.05*i.h,s=new t.Rectangle(i.x+n,i.y+r,i.w-2*n,i.h-2*r),o=s.x+s.w/2,l=s.y+s.h/2,h=Math.min(s.w,s.h)/2,g=new t.Polygon(e.getCtx(),[o-h,l,o,l-h,o+h,l,o,l+h]);g.setMouseEnabled(!1),a.addChild(g);var c=new t.LinearGradientFill(270,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[.75,.5,.15,0,.2,.4,.2],[0,.05,.4,.6,.8,.9,1]);g.setFill(c)},g._renderOverlayTriangle=function(e,a,n){var r=.05*n.w,s=.05*n.h,o=i.isSkyrosSkin(e),l=new t.Rectangle(n.x+r,n.y+s,n.w-2*r,n.h-2*s),h=g._SKYROS_SHAPE_TRIANGLE_INNER_CMDS,c=Math.min(l.w/100,l.h/100);h=t.PolygonUtils.scale(h,c,c),h=t.PolygonUtils.translate(h,n.x+n.w/2,n.y+n.h/2);var u=new t.Polygon(e.getCtx(),h),d=e.getOptions(),p=d&&d.rotation%90==0?d.rotation:0,_=o?p-90:360-p,y=new t.LinearGradientFill(_,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[.3,.55,0,.25,.1],[0,.05,.4,.9,1]);u.setFill(y),(u=g._rotate(e,a,u,l)).setMouseEnabled(!1),a.addChild(u)},g._renderOverlayArrow=function(e,a,n){var r=.05*n.w,s=.05*n.h,o=i.isSkyrosSkin(e),l=new t.Rectangle(n.x+r,n.y+s,n.w-2*r,n.h-2*s),h=g._SKYROS_SHAPE_ARROW_INNER_CMDS,c=Math.min(l.w/100,l.h/100);h=t.PolygonUtils.scale(h,c,c),h=t.PolygonUtils.translate(h,n.x+n.w/2,n.y+n.h/2);var u=new t.Polygon(e.getCtx(),h),d=e.getOptions(),p=d&&d.rotation%90==0?d.rotation:0,_=o?p-90:360-p,y=new t.LinearGradientFill(_,["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],[.3,.55,0,.25,.1],[0,.05,.4,.9,1]);u.setFill(y),(u=g._rotate(e,a,u,l)).setMouseEnabled(!1),a.addChild(u)},g._renderOverlayCircle=function(e,a,i){var n=.05*i.w,r=.05*i.h,s=new t.Rectangle(i.x+n,i.y+r,i.w-2*n,i.h-2*r),o=s.x+s.w/2,l=s.y+s.h/2,h=Math.min(s.w,s.h)/2,g=new t.Circle(e.getCtx(),o,l,h);g.setMouseEnabled(!1),a.addChild(g);var c=o,u=l-.6*h,d=1.5*h,p=new t.RadialGradientFill(["#FFFFFF","#FFFFFF","#FFFFFF"],[0,.25,.5],[.15,.7,.95],c,u,d,[s.x,s.y,s.w,s.h]);g.setFill(p);var _=.6*h,y=.4*h;l-=.3*y;var m=new t.Oval(e.getCtx(),o,l-y,_,y);m.setMouseEnabled(!1),a.addChild(m);var v=o,C=l,S=_,b=new t.RadialGradientFill(["#FFFFFF","#FFFFFF","#FFFFFF"],[0,.2,.5],[.6,.8,1],v,C,S,[s.x,s.y,s.w,s.h]);m.setFill(b)},g._getMetricLabelBounds=function(e,a,i){var n=e.getOptions(),r=n.type,s=n.rotation%90==0?n.rotation:0,o=Math.min(i.w,i.h),l=i.x+i.w/2-o/2,h=i.y+i.h/2-o/2,g=o,c=o;return"triangle"==r?0==s?(l+=.2*o,h+=.25*o,g-=.4*o,c-=.3*o):90==s?(l+=.05*o,h+=.2*o,g-=.3*o,c-=.4*o):180==s?(l+=.2*o,h+=.05*o,g-=.4*o,c-=.3*o):270==s&&(l+=.25*o,h+=.2*o,g-=.3*o,c-=.4*o):"arrow"==r?0==s?(l+=.2*o,h+=.2*o,g-=.4*o,c-=.4*o):90==s?(l+=.05*o,h+=.2*o,g-=.28*o,c-=.4*o):180==s?(l+=.2*o,h+=.2*o,g-=.4*o,c-=.4*o):270==s&&(l+=.23*o,h+=.2*o,g-=.28*o,c-=.4*o):"star"==r?(l+=.25*o,h+=.25*o,g-=.5*o,c-=.4*o):"diamond"==r?(l+=.15*o,h+=.15*o,g-=.3*o,c-=.3*o):"rectangle"==r?(l+=.1*o,h+=.1*o,g-=.2*o,c-=.2*o):(l+=.15*o,h+=.15*o,g-=.3*o,c-=.3*o),new t.Rectangle(l,h,g,c)},t.StatusMeterGauge=function(){},t.Obj.createSubclass(t.StatusMeterGauge,e),t.StatusMeterGauge.newInstance=function(e,a,i){var n=new t.StatusMeterGauge;return n.Init(e,a,i),n},t.StatusMeterGauge.prototype.Init=function(e,a,i){t.StatusMeterGauge.superclass.Init.call(this,e,a,i),this.Defaults=new c,this.__axisInfo=null},t.StatusMeterGauge.prototype.SetOptions=function(e){(e=t.JsonUtils.clone(e)).title&&(e.label=e.title),e.plotArea&&(e.plotArea.className&&(e.plotArea.svgClassName=e.plotArea.className),e.plotArea.style&&(e.plotArea.svgStyle=e.plotArea.style)),this.getCtx().isCustomElement()&&(e.readOnly=e.readonly),t.StatusMeterGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.StatusMeterGauge.prototype.Render=function(t,e,a){u.render(this,t,e,a)},t.StatusMeterGauge.prototype.CreateAnimationOnDisplay=function(e,a,i){for(var n=[],r=0;r<e.length;r++){var s=e[r],o=s.getAnimationParams();"horizontal"==this.Options.orientation?s.setAnimationParams([o[0],o[0],o[2],o[3]]):"vertical"==this.Options.orientation?s.setAnimationParams([o[0],o[1],o[3],o[3]]):"circular"==this.Options.orientation&&s.setAnimationParams([o[0],o[1],0,o[3],o[4]]);var l=new t.CustomAnimation(this.getCtx(),s,i);l.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,s,s.getAnimationParams,s.setAnimationParams,o),l.getAnimator().setEasing(function(e){return t.Easing.backOut(e,.7)}),n.push(l)}return new t.ParallelPlayable(this.getCtx(),n)},t.StatusMeterGauge.prototype.GetValueAt=function(e,a){var i=this.Options,n=t.Agent.isRightToLeft(this.getCtx());if("horizontal"==i.orientation)return this.__axisInfo.getBoundedValueAt(e);if("vertical"==i.orientation)return this.__axisInfo.getBoundedValueAt(a);if("circular"==i.orientation){var r=i.angleExtent,s=Math.atan2(a-this.cy,e-this.cx),o=n?180-(t.Math.radsToDegrees(s)-i.startAngle):t.Math.radsToDegrees(s)-(360-i.startAngle),l=(o=(o+720)%360)/r,h=i.min,g=i.max,c=l*(g-h)+h;return o>r&&(c=(o-r)/(360-r)>.5?0:g),c}};var c=function(){this.Init({skyros:c.VERSION_1,alta:c.SKIN_ALTA})};t.Obj.createSubclass(c,i),c.SKIN_ALTA={color:"#393737",metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},plotArea:{color:"#E4E8EA"}},c.VERSION_1={angleExtent:360,borderRadius:"auto",color:"#313842",indicatorSize:1,innerRadius:.7,metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_SKYROS),position:"auto"},orientation:"horizontal",plotArea:{color:"#AAAAAA",rendered:"auto",borderRadius:"auto"},startAngle:90,thresholdDisplay:"onIndicator"};var u=new Object;t.Obj.createSubclass(u,t.Obj),u.render=function(e,a,i,r){if(n.hasData(e)){var s=e.getOptions(),o=s.__layout.outerGap,h=new t.Rectangle(o,o,i-2*o,r-2*o);"horizontal"==s.orientation||"vertical"==s.orientation?(u._hasMetricLabelOutsidePlotArea(s)&&u._renderMetricLabelOutsidePlotArea(e,a,h),u._renderShape(e,a,h)):"circular"==s.orientation&&u._renderCircularGauge(e,a,h)}else l.renderEmptyText(e,a,new t.Rectangle(0,0,i,r))},u._renderCircularGauge=function(e,a,i){var n,r=e.getOptions(),s=i.clone(),h=t.Agent.isRightToLeft(e.getCtx()),g=0,c=null,d=r.value,p=r.innerRadius,_=r.thresholds,y=null,m=t.Math.TWO_PI-t.Math.degreesToRads(r.startAngle),v=t.Math.degreesToRads(r.angleExtent),C=(m+v)%(2*Math.PI);e.cx=i.w/2,e.cy=i.h/2,v!=2*Math.PI&&(c=u._adjustCenterAndBounds(e,p,m,v,C,i,h),y=e.maxInnerDiameter);var S=.5*(n=n||Math.min(i.w,i.h))*p,b=.5*n,f=r.indicatorSize;if(f&&f>1){var x=(1-1/f)/2*(b-S);S+=x,b-=x}var A="middle";c||(y=Math.min(i.w,i.h)*p,c=new t.Rectangle(i.x+i.w/2-y*(3/7),i.y+i.h/2-y*(2.5/7),y*(6/7),y*(5/7)));if(o.hasLabel(r)){var O="middle",w=new t.Rectangle(c.x,c.y,c.w,c.h);"off"!=r.metricLabel.rendered&&(w.y=w.y+.6*w.h,w.h=.4*w.h,O="top"),l.renderLabel(e,a,w,null,O)&&"off"!=r.metricLabel.rendered&&(c.h=.55*c.h,A="bottom")}l.renderMetricLabel(e,a,c,null,"center",A,!0);var L=m,F=g*v,M=o.getPlotAreaBorderColor(e);if(_&&"off"!=r.plotArea.rendered&&"all"==r.thresholdDisplay)for(var E=0;E<_.length;E++){var R=o.getThresholdColor(e,_[E],E),T=_[E].max<r.max?_[E].max:r.max,I=0==E?r.min:_[E-1].max;L=m+v*l.getFillPercentage(r,r.min,T,I),F=(g=l.getFillPercentage(r,I,T,T))*v;var P=_[E].borderColor;u._drawCircularArc(e,a,i,L,F,S,b,R,!0,P||M)}else if("off"!=r.plotArea.rendered&&"all"!=r.thresholdDisplay){var D=o.getPlotAreaColor(e);u._drawCircularArc(e,a,i,m,v,S,b,D,!0,M)}if(S=n*p*.5,b=.5*n,f&&f<1){var k=(1-f)/2*(b-S);S+=k,b-=k}F=(g=l.getFillPercentage(r,r.min,r.max,d))*v,u._drawCircularArc(e,a,i,m,F,S,b,o.getColor(e),!1);var G=r.referenceLines;if(G)for(var N=0;N<G.length;N++){var U=G[N].color?G[N].color:"black",V=G[N].lineWidth?G[N].lineWidth:2,B=G[N].lineStyle;d=G[N].value;var H=m+l.getFillPercentage(r,r.min,r.max,d)*v;u._drawCircularReferenceLine(e,a,i,H,U,V,B)}r.center.renderer&&u._renderCenterContent(e,r,i,s,y)},u._renderShape=function(e,a,n){var r=e.getOptions(),s=t.Agent.isRightToLeft(e.getCtx()),l="vertical"==r.orientation,h={layout:{}};h.layout.gapRatio=0,h.timeAxisType="disabled",h.position=l?"left":"bottom",h.min=r.min,h.max=r.max,h.dataMin=r.min,h.dataMax=r.max,h.tickLabel={rendered:"off"};var g=t.AxisInfo.newInstance(e.getCtx(),h,n);e.__axisInfo=g;var c=0;r.max<=0?c=r.max:r.min>=0&&(c=r.min);var p=g.getCoordAt(c);"off"==r.plotArea.rendered||"auto"==r.plotArea.rendered&&"onIndicator"==r.thresholdDisplay||(p=g.getUnboundedCoordAt(r.min));var _=g.getUnboundedCoordAt(r.value);_=l?Math.max(n.y,Math.min(n.y+n.h,_)):Math.max(n.x,Math.min(n.x+n.w,_));var y,m,v,C,S,b,f,x=0,A=(Z=r.indicatorSize)<1?1:Z,O=Z>1?1:Z,w=Math.min(.5,(Math.abs(_-p)-.5)/2);if(l){var L=_>p?-1:1;y=n.x+(1-O)/2*n.w+.5,m=n.x+n.w*(1+O)/2-.5,C=p-L*w,v=_+L*w,S=n.x+(1-1/A)/2*n.w,b=n.x+n.w*(1+1/A)/2,f=n.y,x=n.y+n.h}else{L=(s?_>p:_<p)?-1:1;y=s?p-L*w:p+L*w,m=s?_+L*w:_-L*w,v=n.y+(1-O)/2*n.h+.5,C=n.y+n.h*(1+O)/2-.5,S=n.x,b=n.x+n.w,f=n.y+(1-1/A)/2*n.h,x=n.y+n.h*(1+1/A)/2}var F=!0;r.value==r.min&&(l?v=C:y=m,F=!1);var M=o.getBorderColor(e),E=o.getPlotAreaBorderColor(e),R=r.thresholds,T=l?0:270;if(R&&"off"!=r.plotArea.rendered&&"all"==r.thresholdDisplay)for(var I=R.length-1;I>=0;I--){var P=I,D=u._createShape(e,e.getCtx(),S,b,f,x),k=new t.ClipPath("pacp"+e.getId());if(I==R.length-1)!l&&s?k.addRect(g.getUnboundedCoordAt(r.max)+1,0,n.w+2,n.h+2,0,0):k.addRect(0,0,n.w+2,n.h+2,0,0);else if(l)k.addRect(0,g.getUnboundedCoordAt(r.max),n.w+2,1*(r.max-R[R.length-2-P].max)/Math.abs(r.min-r.max)*n.h,0,0);else if(s){var G=null==R[R.length-2-P].max?100:R[R.length-2-P].max;k.addRect(g.getUnboundedCoordAt(r.max),0,1*(r.max-G)/Math.abs(r.min-r.max)*n.w,n.h+2,0,0)}else k.addRect(0,0,1*(R[P].max-r.min)/Math.abs(r.min-r.max)*n.w,n.h+2,0,0);D.setClipPath(k),(s||l)&&(P=R.length-1-I),D.setSolidFill(o.getThresholdColor(e,R[P],P));var N=R[P].borderColor;D.setSolidStroke(N||E),u._renderPlotAreaVisualEffects(e,a,D,o.getThresholdColor(e,R[P],P),T)}else if("off"!=r.plotArea.rendered&&("auto"!=r.plotArea.rendered||"onIndicator"!=r.thresholdDisplay)&&"all"!=r.thresholdDisplay){D=l?u._createShape(e,e.getCtx(),S,b,g.getUnboundedCoordAt(r.max),g.getUnboundedCoordAt(r.min)):u._createShape(e,e.getCtx(),g.getUnboundedCoordAt(r.min),g.getUnboundedCoordAt(r.max),f,x);var U=o.getPlotAreaColor(e);D.setSolidFill(U),D.setSolidStroke(E),u._renderPlotAreaVisualEffects(e,a,D,U,T)}var V=new d(e,e.getCtx(),y,m,v,C);e.__shapes.push(V);var B=o.getColor(e);if(i.isSkyrosSkin(e)||"none"==r.visualEffects)V.setSolidFill(B);else{var H=[t.ColorUtils.adjustHSL(B,0,-.09,.04),t.ColorUtils.adjustHSL(B,0,-.04,-.05)],j=new t.LinearGradientFill(T,H,[1,1],[0,1]);V.setFill(j)}M&&V.setSolidStroke(M),V.setClassName(r.svgClassName),V.setStyle(r.svgStyle),F&&a.addChild(V);var W,Y,K,X,z=u._createShape(e,e.getCtx(),y,m,v,C);u._renderVisualEffects(e,a,z,F,T);var Q=r.referenceLines;if(Q)for(I=0;I<Q.length;I++){var q=Q[I].color?Q[I].color:"white",J=Q[I].value,Z=r.indicatorSize;l?(X=((1-Z)/2+Z)*n.w,W=n.x+(1-Z)/4*n.w,Y=g.getUnboundedCoordAt(J),K=new t.Line(e.getCtx(),W,Y,W+X,Y)):(X=((1-Z)/2+Z)*n.h,W=g.getUnboundedCoordAt(J),Y=n.y+(1-Z)/4*n.h,K=new t.Line(e.getCtx(),W,Y,W,Y+X));var $=Q[I].lineWidth?Q[I].lineWidth:2,tt=new t.SolidStroke(q,1,$);if(Q[I].lineStyle&&tt.setStyle(t.Stroke.convertTypeString(Q[I].lineStyle)),K.setStroke(tt),a.addChild(K),!t.Agent.isPlatformIE()&&"none"!=r.visualEffects){var et=t.ColorUtils.makeRGBA(0,0,0,.8),at=new t.Shadow(et,.75,3,3,50,1,2,!1,!1,!1);K.addDrawEffect(at)}}var it=r.metricLabel.position;if("on"!=r.metricLabel.rendered||u._hasMetricLabelOutsidePlotArea(r)||o.hasLabel(r))o.hasLabel(r)&&u._renderLabel(e,a,n,it);else{var nt={x1:y,x2:m,y1:v,y2:C},rt={x1:S,x2:b,y1:f,y2:x};u._renderMetricLabelInsidePlotArea(e,a,n,B,it,nt,rt)}},u._createShape=function(e,a,n,r,s,o){var l=Math.min(n,r),h=Math.min(s,o),g=Math.abs(n-r),c=Math.abs(o-s),u=e.getOptions(),d="vertical"==u.orientation?g:c,p=i.isSkyrosSkin(e)?"25%":"15%",_="auto"!=u.plotArea.borderRadius?u.plotArea.borderRadius:u.borderRadius,y=t.PathUtils.rectangleWithBorderRadius(l,h,g,c,_,d,p);return new t.Path(a,y)},u._renderVisualEffects=function(e,a,n,r,s){if("none"!=e.getOptions().visualEffects&&i.isSkyrosSkin(e)){var o=new t.LinearGradientFill(s,["#FFFFFF","#FFFFFF","#FFFFFF"],[.5,.3125,0],[0,.3,1]);n.setFill(o),e.__shapes.push(n),n.setMouseEnabled(!1),r&&a.addChild(n)}},u._renderPlotAreaVisualEffects=function(e,a,n,r,s){var o,l,h=e.getOptions();(n.setMouseEnabled(!1),a.addChild(n),"none"!=h.visualEffects)&&(i.isSkyrosSkin(e)?(o=[t.ColorUtils.getDarker(r,.1),r,t.ColorUtils.getBrighter(r,.7)],l=new t.LinearGradientFill(s,o,[1,1,1],[0,.04,.73])):(o=[t.ColorUtils.adjustHSL(r,0,-.04,-.05),t.ColorUtils.adjustHSL(r,0,-.09,.04)],l=new t.LinearGradientFill(s,o,[1,1],[0,1])),n.setFill(l),n.setClassName(h.plotArea.svgClassName),n.setStyle(h.plotArea.svgStyle))},u._renderMetricLabelOutsidePlotArea=function(e,a,i){var n=e.getOptions(),r=t.Agent.isRightToLeft(e.getCtx()),s="vertical"==n.orientation,o=new t.OutputText(e.getCtx(),""),h=l.getFormattedMetricLabel(n.value,e),g=n.__layout.labelGap,c=n.metricLabel.style,u=c.getStyle("color");u=u||"#333333";var d=null;if(o.setCSSStyle(c),o.setSolidFill(u),s&&"on"==n.metricLabel.rendered){var p=n.max>0?n.max:n.min,_=l.getFormattedMetricLabel(p,e);(b=new t.OutputText(e.getCtx(),_)).setCSSStyle(c);var y=new t.Rectangle(i.x,i.y+.8*i.h,i.w,.2*i.h),m=c.getStyle("font-size")||t.TextUtils.getOptimalFontSize(b.getCtx(),b.getTextString(),b.getCSSStyle(),y);b.setFontSize(m),d=b.getDimensions(),i.h-=d.h,C=i.y-d.h;var v=d.w;o.setFontSize(m),o.setTextString(h),o.setX(i.x+i.w/2),o.setY(i.y+i.h),i.h-=g,o.alignCenter(),t.TextUtils.fitText(o,i.w,i.h,a)}else if(!s&&"on"==n.metricLabel.rendered){m=c.getStyle("font-size");var C,S=l.getFormattedMetricLabel(n.min,e),b=l.getFormattedMetricLabel(n.max,e);if(void 0===m&&i.h<18&&(m=l.calcLabelFontSize([h,S,b],o,i)),m=m?parseInt(m):13,o.setFontSize(m),n.max>0||"off"!=n.plotArea.rendered||"auto"!=n.plotArea.rendered||"onIndicator"!=n.thresholdDisplay){p=n.max>0?n.max:n.min,_=l.getFormattedMetricLabel(p,e);(b=new t.OutputText(e.getCtx(),_)).setCSSStyle(c),b.setFontSize(m),(d=b.getDimensions()).w=Math.min(d.w,i.w),C=r?i.x+d.w:i.x+i.w,v=d.w,r?(i.x+=d.w+g,i.w-=d.w+g):i.w-=d.w+g}if(n.min<0&&"on"!=n.plotArea.rendered&&("auto"!=n.plotArea.rendered||"onIndicator"!=n.thresholdDisplay)){var f=l.getFormattedMetricLabel(n.min,e);(S=new t.OutputText(e.getCtx(),f)).setCSSStyle(c),S.setFontSize(m);var x=S.getDimensions();(n.value<0||n.max<=0)&&(C=r?i.x+i.w:i.x+x.w,v=x.w),r?i.w-=x.w+g:(i.x+=x.w+g,i.w-=x.w+g)}o.setTextString(h),o.setX(C),t.TextUtils.centerTextVertically(o,i.y+i.h/2),o.alignRight();var A=t.Agent.isPlatformGecko()?i.h+2:i.h;t.TextUtils.fitText(o,v,A,a)}},u._renderMetricLabelInsidePlotArea=function(e,a,i,n,r,s,o,h){var g=e.getOptions(),c=t.Agent.isRightToLeft(e.getCtx()),d="vertical"==g.orientation,p="on"==g.plotArea.rendered,_="center",y="middle",m=new t.Rectangle(Math.min(s.x1,s.x2),Math.min(s.y1,s.y2),Math.abs(s.x2-s.x1),Math.abs(s.y2-s.y1)),v=g.metricLabel.style.getStyle("color");"center"==r?(v=v||t.ColorUtils.getContrastingTextColor(n),d?(m.h-=m.w,m.y+=m.w/2):(m.w-=m.h,m.x+=m.h/2)):"insideIndicatorEdge"==r?(v=v||t.ColorUtils.getContrastingTextColor(n),d?(m.h-=m.w,m.y+=m.w/2,y=!p&&s.y1>s.y2?"bottom":"top"):(m.w-=m.h,m.x+=m.h/2,_=c?!p&&s.x1<s.x2?"right":"left":!p&&s.x1>s.x2?"left":"right")):"outsideIndicatorEdge"==r&&(d?(m.h=Math.abs(o.y1-s.y1)-m.w,m.y=o.y1+m.w/2,y="bottom",!p&&s.y1>s.y2&&(m.h=Math.abs(o.y2-s.y1)-m.w,m.y=s.y1+m.w/2,y="top")):c?!p&&s.x1<s.x2?(m.w=Math.abs(o.x2-s.x2)-m.h,m.x=s.x2+m.h/2,_="left"):(m.w=Math.abs(o.x1-s.x2)-m.h,m.x=o.x1+m.h/2,_="right"):!p&&s.x1>s.x2?(m.w=Math.abs(o.x1-s.x2)-m.h,m.x=o.x1+m.h/2,_="right"):(m.w=Math.abs(o.x2-s.x2)-m.h,m.x=s.x2+m.h/2,_="left")),l.renderMetricLabel(e,a,m,v,_,y)||h||("outsideIndicatorEdge"==r?u._renderMetricLabelInsidePlotArea(e,a,i,n,"insideIndicatorEdge",s,o,!0):"insideIndicatorEdge"!=r&&"center"!=r||u._renderMetricLabelInsidePlotArea(e,a,i,n,"outsideIndicatorEdge",s,o,!0))},u._renderLabel=function(e,a,i,n){var r=t.Agent.isRightToLeft(e.getCtx()),s=e.getOptions(),o="vertical"==s.orientation,h=new t.Rectangle(i.x,i.y,o?i.w:i.w-i.h,o?i.h-i.w:i.h),g=s.label.text;if(!u._hasMetricLabelOutsidePlotArea(s)&&"on"==s.metricLabel.rendered){var c=l.getFormattedMetricLabel(s.value,e);g=t.Bundle.getTranslatedString(t.Bundle.UTIL_PREFIX,"COLON_SEP_LIST",[g,c])}var d=s.label.style,p=d.clone(),_=d.getStyle("font-size");if(!_){var y=new t.OutputText(e.getCtx(),g,0,0);y.setCSSStyle(d),y.setTextString(g),_=o?t.TextUtils.getOptimalFontSize(y.getCtx(),y.getTextString(),y.getCSSStyle(),new t.Rectangle(h.x,h.y,h.w,Number.MAX_VALUE)):t.TextUtils.getOptimalFontSize(y.getCtx(),y.getTextString(),y.getCSSStyle(),new t.Rectangle(h.x,h.y,Number.MAX_VALUE,h.h))}var m=new t.MultilineText(e.getCtx(),g);p.setFontSize("font-size",_),m.setCSSStyle(p),t.TextUtils.fitText(m,h.w,h.h,e),"center"==s.label.position||"auto"==s.label.position&&o?(t.TextUtils.centerTextVertically(m,i.y+i.h/2),m.setX(i.x+i.w/2),m.alignCenter()):(t.TextUtils.centerTextVertically(m,i.y+i.h/2),!o&&r?(m.setX(i.x+i.w-h.h/2),m.alignRight()):o||r?o&&(m.setY(i.y+i.h-m.getDimensions().h-h.w/2),m.setX(i.x+i.w/2),m.alignCenter()):(m.setX(i.x+h.h/2),m.alignLeft())),a.addChild(m)},u._calcPointOnArc=function(t,e,a){return{x:Math.cos(a)*e+t.w/2+t.x,y:Math.sin(a)*e+t.h/2+t.y}},u._drawCircularArc=function(e,a,i,n,r,s,l,h,g,c){var d,_=e.getCtx();t.Agent.isRightToLeft(e.getCtx())&&(n=(n=Math.PI-n-r)>0?n:n+2*Math.PI),g?d=new t.Path(_,u.createCircularPathCmd(i,n,r,s,l)):(d=new p(_,i,n,r,s,l),e.__shapes.push(d)),d.setSolidFill(h);var y=o.getBorderColor(e);y&&!g?d.setSolidStroke(y):g&&c&&d.setSolidStroke(c);var m=e.getOptions();d.setClassName(g?m.plotArea.svgClassName:m.svgClassName),d.setStyle(g?m.plotArea.svgStyle:m.svgStyle),a.addChild(d)},u._drawCircularReferenceLine=function(e,a,i,n,r,s,o){var l=e.getCtx(),h=Math.min(i.w,i.h),g=.275*h,c=.5*h;t.Agent.isRightToLeft(e.getCtx())&&(n=(n=Math.PI-n)>0?n:n+2*Math.PI);var d=u._calcPointOnArc(i,g,n),p=u._calcPointOnArc(i,c,n),_=new t.Line(l,d.x,d.y,p.x,p.y),y=new t.SolidStroke(r,1,s);o&&y.setStyle(t.Stroke.convertTypeString(o)),_.setStroke(y),a.addChild(_)},u.createCircularPathCmd=function(e,a,i,n,r){var s,o,l,h,g;return i<t.Math.TWO_PI?(o=u._calcPointOnArc(e,r,a),l=u._calcPointOnArc(e,r,a+i),h=u._calcPointOnArc(e,n,a+i),g=u._calcPointOnArc(e,n,a),s=t.PathUtils.moveTo(o.x,o.y)+t.PathUtils.arcTo(r,r,i,1,l.x,l.y)+t.PathUtils.lineTo(h.x,h.y)+t.PathUtils.arcTo(n,n,i,0,g.x,g.y)+t.PathUtils.closePath()):(o=u._calcPointOnArc(e,r,a),l=u._calcPointOnArc(e,r,a+i/2),h=u._calcPointOnArc(e,n,a),g=u._calcPointOnArc(e,n,a+i/2),s=t.PathUtils.moveTo(o.x,o.y)+t.PathUtils.arcTo(r,r,i/2,1,l.x,l.y)+t.PathUtils.arcTo(r,r,i/2,1,o.x,o.y),n>0&&(s+=t.PathUtils.moveTo(g.x,g.y)+t.PathUtils.arcTo(n,n,i/2,0,h.x,h.y)+t.PathUtils.arcTo(n,n,i/2,0,g.x,g.y)),s+=t.PathUtils.closePath()),s},u.getAngleQuadrant=function(e,a){var i=1;return a?e>=t.Math.HALF_PI&&e<Math.PI?i=2:e>=Math.PI&&e<1.5*Math.PI?i=3:e>=1.5*Math.PI&&e<t.Math.TWO_PI&&(i=4):e>t.Math.HALF_PI&&e<=Math.PI?i=2:e>Math.PI&&e<=1.5*Math.PI?i=3:(e>1.5*Math.PI&&e<t.Math.TWO_PI||0==e)&&(i=4),i},u._hasMetricLabelOutsidePlotArea=function(t){var e=t.metricLabel.position;return"auto"==e||"outsidePlotArea"==e||("withLabel"==e||"withTitle"==e)&&!o.hasLabel(t)},u._adjustCenterAndBounds=function(e,a,i,n,r,s,o){var l,h,g=null,c=u.getAngleQuadrant(i,!0),d=u.getAngleQuadrant(r,!1),p=s.w,_=s.h,y=p/2,m=_/2;if(c==d&&n<=t.Math.HALF_PI)l=2*Math.min(s.w,s.h),s.w=s.w+l/2,s.h=s.h+l/2,h=l*a,!o&&1==c||o&&2==c?(s.x-=l/2,s.y-=l/2,y=p/2-l/4+1,m=_/2-l/4+1,g=new t.Rectangle(s.x+s.w/2-1,s.y+s.h/2-1,h*(3/7)-2,h*(2.5/7)-2)):!o&&2==c||o&&1==c?(s.y-=l/2,y=p/2+l/4-1,m=_/2-l/4+1,g=new t.Rectangle(s.x+s.w/2-h*(3/7)+1,s.y+s.h/2-1,h*(3/7)-2,h*(2.5/7)-2)):!o&&3==c||o&&4==c?(y=p/2+l/4-1,m=_/2+l/4-1,g=new t.Rectangle(s.x+s.w/2-h*(3/7)+1,s.y+s.h/2-h*(2.5/7)+1,h*(3/7)-2,h*(2.5/7)-2)):(!o&&4==c||o&&3==c)&&(s.x-=l/2,y=p/2-l/4+1,m=_/2+l/4-1,g=new t.Rectangle(s.x+s.w/2-1,s.y+s.h/2-h*(2.5/7)+1,h*(3/7)-2,h*(2.5/7)-2));else if(c%4+1==d&&n<=Math.PI)1==c||3==c?(h=(l=Math.min(s.w,2*s.h))*a,s.w>s.h&&(g=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+s.h-(s.h-l/2)/2-h*(2.75/7),h*(6/7),h*(2.5/7)),1==c?(g.y=s.y+(s.h-l/2)/2+h*(.5/7),s.y-=l/2-(s.h-l/2)/2,m=_/2-l/4+1):(s.y+=(s.h-l/2)/2,m=_/2+l/4-1),s.h=l)):(h=(l=Math.min(2*s.w,s.h))*a,s.w<s.h&&(g=new t.Rectangle(s.x+s.w-(s.w-l/2)/2-h*(3.25/7),s.y+s.h/2-h*(2.5/7),h*(3/7),h*(5/7)),!o&&4==c||o&&2==c?(g.x=s.x+(s.w-l/2)/2+h*(.25/7),s.x-=l/2-(s.w-l/2)/2,y=p/2-l/4+1):(s.x+=(s.w-l/2)/2,y=p/2+l/4-1),s.w=l));else if(d%4+1==c&&n>Math.PI)if(1==c&&s.h>s.w){var v=(h=(l=Math.min(s.w/(Math.cos(i)+1)*2,s.w/(Math.sin(r-1.5*Math.PI)+1)*2,s.h))*a)*(3/7)*(2*s.w/l-1);o?(g=new t.Rectangle(s.x+s.w-l/2-v,s.y+s.h/2-h*(2.5/7),h*(3/7)+v,h*(5/7)),s.x-=l-s.w,y=-l/2+p):(g=new t.Rectangle(s.x+l/2-h*(3/7),s.y+s.h/2-h*(2.5/7),h*(3/7)*(2*s.w/l-1+1),h*(5/7)),y=l/2),s.w=l}else if(2==c&&s.h<s.w)h=(l=Math.min(s.h/(Math.cos(i-t.Math.HALF_PI)+1)*2,s.h/(Math.sin(r)+1)*2,s.w))*a,g=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+l/2-h*(2.5/7),h*(6/7),h*(2.5/7)*(2*s.h/l-1+1)),s.h=l,m=l/2;else if(3==c&&s.h>s.w){v=(h=(l=Math.min(s.w/(Math.cos(i-Math.PI)+1)*2,s.w/(Math.sin(r-t.Math.HALF_PI)+1)*2,s.h))*a)*(3/7)*(2*s.w/l-1);o?(g=new t.Rectangle(s.x+l/2-h*(3/7),s.y+s.h/2-h*(2.5/7),h*(3/7)*(2*s.w/l-1+1),h*(5/7)),y=l/2):(g=new t.Rectangle(s.x+s.w-l/2-v,s.y+s.h/2-h*(2.5/7),h*(3/7)+v,h*(5/7)),s.x-=l-s.w,y=-l/2+p),s.w=l}else if(4==c&&s.h<s.w){v=(h=(l=Math.min(s.h/(Math.cos(i-1.5*Math.PI)+1)*2,s.h/(Math.sin(t.Math.TWO_PI-r)+1)*2,s.w))*a)*(2.5/7)*(2*s.h/l-1);g=new t.Rectangle(s.x+s.w/2-h*(3/7),s.y+s.h-l/2-v,h*(6/7),h*(2.5/7)+v),s.y-=l-s.h,s.h=l,m=-l/2+_}return e.cx=y,e.cy=m,e.maxInnerDiameter=h,g},u._renderCenterContent=function(e,a,i,n,r){var s=new t.Rectangle(i.x+.5*(i.w-r),i.y+.5*(i.h-r),r,r);s=s.getIntersection(n);var o=new t.Rectangle(i.x+.5*(i.w-r/Math.sqrt(2)),i.y+.5*(i.h-r/Math.sqrt(2)),r/Math.sqrt(2),r/Math.sqrt(2));o=o.getIntersection(n);var h=a.center.renderer;if(h){var g={outerBounds:{x:s.x,y:s.y,width:s.w,height:s.h},innerBounds:{x:o.x,y:o.y,width:o.w,height:o.h},metricLabel:l.getFormattedMetricLabel(a.value,e),component:a._widgetConstructor},c=e.getCtx();g=c.fixRendererContext(g);var u=c.getContainer(),d=e.centerDiv;d&&u.removeChild(d);var p=h(g);if(!p)return;var _=c.createOverlayDiv();_.appendChild(p),e.centerDiv=_,u.appendChild(_);var y=c.getOverlayAttachedCallback();y&&y(_)}};var d=function(t,e,a,i,n,r){this.Init(t,e,a,i,n,r)};t.Obj.createSubclass(d,t.Path),d.prototype.Init=function(t,e,a,i,n,r){d.superclass.Init.call(this,e),this._gauge=t,this.setCoords(a,i,n,r)},d.prototype.setCoords=function(e,a,n,r){this._x1=e,this._x2=a,this._y1=n,this._y2=r;var s=Math.min(e,a),o=Math.min(n,r),l=Math.abs(e-a),h=Math.abs(r-n),g=this._gauge.getOptions(),c="vertical"==g.orientation?l:h,u=i.isSkyrosSkin(this._gauge)?"25%":"15%",d=t.PathUtils.rectangleWithBorderRadius(s,o,l,h,g.borderRadius,c,u);this.setCmds(d)},d.prototype.getAnimationParams=function(){return[this._x1,this._x2,this._y1,this._y2]},d.prototype.setAnimationParams=function(t){t&&4==t.length&&this.setCoords(t[0],t[1],t[2],t[3])};var p=function(t,e,a,i,n,r){this.Init(t,e,a,i,n,r)};t.Obj.createSubclass(p,t.Path),p.prototype.Init=function(t,e,a,i,n,r){p.superclass.Init.call(this,t),this.setPath(e,a,i,n,r)},p.prototype.setPath=function(e,a,i,n,r){e&&e instanceof t.Rectangle?this._bounds=e:e=this._bounds,this._startAngle=a,this._angleExtent=i,this._innerRadius=n,this._outerRadius=r,this.setCmds(u.createCircularPathCmd(e,a,i,n,r))},p.prototype.getAnimationParams=function(){return[this._bounds,this._startAngle,this._angleExtent,this._innerRadius,this._outerRadius]},p.prototype.setAnimationParams=function(t){t&&5==t.length&&this.setPath(t[0],t[1],t[2],t[3],t[4])},t.DialGauge=function(){},t.Obj.createSubclass(t.DialGauge,e),t.DialGauge.newInstance=function(e,a,i){var n=new t.DialGauge;return n.Init(e,a,i),n},t.DialGauge.prototype.Init=function(e,a,i){t.DialGauge.superclass.Init.call(this,e,a,i),this.Defaults=new _,this.__anchorPt=null},t.DialGauge.prototype.SetOptions=function(e){var a=(e=t.JsonUtils.clone(e)).background,i=e.indicator;"string"==typeof a&&(e.background=o.getDialBackground(a),e.background.images=e._backgroundImages),"string"==typeof i&&(e.indicator=o.getDialIndicator(i),e.indicator.images=e._indicatorImages),t.DialGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.DialGauge.prototype.Render=function(t,e,a){y.render(this,t,e,a)},t.DialGauge.prototype.renderUpdate=function(){y.updateIndicatorAndLabel(this,this._container,this.Width,this.Height);var t=this.getEventManager();t&&t.associate(this._editingOverlay,this.__getLogicalObject(),!0),this.UpdateAriaLiveValue(this._container)},t.DialGauge.prototype.CreateAnimationOnDisplay=function(e,a,i){for(var n=[],r=0;r<e.length;r++){var s=e[r],o=s.getAnimationParams(),l=y.__getStartAngle(this);s.setAngle(l);var h=new t.CustomAnimation(this.getCtx(),s,i);h.getAnimator().addProp(t.Animator.TYPE_NUMBER_ARRAY,s,s.getAnimationParams,s.setAnimationParams,o),h.getAnimator().setEasing(function(e){return t.Easing.backOut(e,.7)}),n.push(h)}return new t.ParallelPlayable(this.getCtx(),n)},t.DialGauge.prototype.GetValueAt=function(e,a){var i=Math.atan2(a-this.__anchorPt.y,e-this.__anchorPt.x),n=t.Math.radsToDegrees(i);n<=0&&(n+=360);var r=t.Agent.isRightToLeft(this.getCtx()),s=this.getOptions().background,o=r?180+s.startAngle:360-s.startAngle,l=s.angleExtent,h=o+l;if(r)for(h=o,o-=l;o<0;)o+=360,h+=360;n+360>=o&&n+360<=h?n+=360:n>=o&&n<=h||(n=n>h?o+360-n<n-h?o:h:o-n<n+360-h?o:h);var g=(n-o)/l;r&&(g=1-g);var c=this.Options.min;return g*(this.Options.max-c)+c};var _=function(){this.Init({skyros:_.VERSION_1,alta:{}})};t.Obj.createSubclass(_,i),_.VERSION_1={background:{startAngle:180,angleExtent:180,indicatorLength:.7},metricLabel:{style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)},tickLabel:{scaling:"auto",style:new t.CSSStyle(t.BaseComponentDefaults.FONT_FAMILY_ALTA)}};var y=new Object;t.Obj.createSubclass(y,t.Obj),y.render=function(e,a,i,r){if(n.hasData(e)){var s=new t.Rectangle(0,0,i,r);y._renderShape(e,a,s),y._renderLabel(e,a,s)}else l.renderEmptyText(e,a,new t.Rectangle(0,0,i,r))},y.updateIndicatorAndLabel=function(e,a,i,n){e.__indicatorContainer.setAngle(y._getRotation(e,e.getOptions().value)),a.removeChild(e.__label),y._renderLabel(e,a,new t.Rectangle(0,0,i,n))},y._renderShape=function(e,a,i){var n=e.getOptions(),r=y._createBackground(e,i);a.addChild(r),n.background.majorTickCount&&n.background.radius&&y._renderTickLabels(e,a,i);var s=y._createIndicator(e,i),o=new t.Container(e.getCtx()),l=new m(e.getCtx());a.addChild(o),o.addChild(l),l.addChild(s);var h=s.getDimensions(),g=y._getRotation(e,n.value),c=y._getBackgroundAnchorPoint(e,i),u=y._getIndicatorAnchorPoint(e,i,h),d=y._getIndicatorScaleFactor(e,i,h),p=new t.Matrix;p.translate(-u.x,-u.y),p.scale(d,d),s.setMatrix(p),l.setAngle(g),(p=new t.Matrix).translate(c.x,c.y),o.setMatrix(p),e.__shapes.push(l),e.__indicatorContainer=l,e.__anchorPt=c},y._createBackground=function(e,a){var i=e.getOptions().background,n=t.Agent.isRightToLeft(e.getCtx()),r=t.Agent.isTouchDevice(),s=r?2*a.w:a.w,o=r?2*a.h:a.h,l=i.images;if(l&&l.length>0){var h,g,c,u=[];for(h=0;h<l.length;h++){var d="rtl"==l[h].dir;n&&d?u.push(l[h]):n||d||u.push(l[h])}for(l=u.length>0?u:l,h=0;h<l.length;h++){var p=l[h],_=p.src,y=p.width,m=p.height,v=_&&_.search(".svg")>-1;if(0==h&&(g=y,c=m),v||y>=s&&m>=o||h==l.length-1){var C=new t.Image(e.getCtx(),_,0,0,y,m),S=new t.Matrix,b=Math.min(a.w/y,a.h/m),f=(a.w-b*y)/2,x=(a.h-b*m)/2;if(S.scale(b,b),S.translate(f,x),C.setMatrix(S),v&&t.Agent.isPlatformWebkit()){var A=t.ImageLoader.loadImage(e.getCtx(),_,t.Obj.createCallback(C,C.__setDimensions));A&&C.__setDimensions(A)}if(a.x+=f,a.y+=x,a.w=b*y,a.h=b*m,isNaN(i.anchorX)||isNaN(i.anchorY)||(i._anchorX=n?a.x+a.w-a.w*i.anchorX/g:a.x+a.w*i.anchorX/g,i._anchorY=a.y+a.h*i.anchorY/c),i.metricLabelBounds){var O={};O.width=a.w*i.metricLabelBounds.width/g,O.height=a.h*i.metricLabelBounds.height/c,O.y=a.y+a.h*i.metricLabelBounds.y/c,O.x=n?a.x+a.w-a.w*i.metricLabelBounds.x/g-O.width:a.x+a.w*i.metricLabelBounds.x/g,i._metricLabelBounds=O}var w=Math.min(a.w/g,a.h/c);return i._radius=i.radius*w,i._tickLabelHeight=i.tickLabelHeight*a.h/c,i._tickLabelWidth=i.tickLabelWidth*a.w/g,C}}}return null},y._createIndicator=function(e,a){var i,n,r=e.getOptions().indicator,s=y._getIndicatorLength(e,a),o=t.Agent.isTouchDevice()?2*s:s,l=r.images;if(l&&l.length>0)for(var h=0;h<l.length;h++){var g=l[h],c=g.src,u=g.width,d=g.height,p=c&&c.search(".svg")>-1;if(0==h&&(i=u,n=d),p||d>=o||h==l.length-1){var _=new t.Image(e.getCtx(),c,0,0,u,d);if(p&&t.Agent.isPlatformWebkit())t.ImageLoader.loadImage(e.getCtx(),c,t.Obj.createCallback(_,_.__setDimensions))&&(_.setWidth(u),_.setHeight(d));return isNaN(r.anchorX)||isNaN(r.anchorY)||(r._anchorX=r.anchorX*u/i,r._anchorY=r.anchorY*d/n),_}}return null},y.__getStartAngle=function(e){var a=e.getOptions().background,i=t.Agent.isRightToLeft(e.getCtx())?180-a.startAngle:a.startAngle;return Math.PI*(90-i)/180},y._getRotation=function(e,a){var i=e.getOptions(),n=i.background,r=i.min,s=i.max,o=((a=Math.max(Math.min(a,s),r))-r)/(s-r),l=t.Agent.isRightToLeft(e.getCtx()),h=(l?180-n.startAngle:n.startAngle)-o*(l?-n.angleExtent:n.angleExtent);return Math.PI*(90-h)/180},y._getBackgroundAnchorPoint=function(e,a){var i=e.getOptions().background,n=i._anchorX,r=i._anchorY;return isNaN(n)||isNaN(r)?new t.Point(a.x+a.w/2,a.y+a.h/2):new t.Point(n,r)},y._getIndicatorLength=function(t,e){var a=Math.min(e.w,e.h)/2;return t.getOptions().background.indicatorLength*a},y._getIndicatorAnchorPoint=function(e,a,i){var n=e.getOptions().indicator,r=n._anchorX,s=n._anchorY;return isNaN(r)||isNaN(s)?new t.Point(i.x+i.w/2,i.y+i.h):new t.Point(r,s)},y._getIndicatorScaleFactor=function(t,e,a){return y._getIndicatorLength(t,e)/a.h},y._renderLabel=function(e,a,i){var n=e.getOptions();if("on"==n.metricLabel.rendered){var r=l.getFormattedMetricLabel(n.value,e),s=l.getFormattedMetricLabel(n.min,e),o=l.getFormattedMetricLabel(n.max,e),h=i.x+i.w/2,g=i.y+i.h/2,c=i.w,u=i.h,d=n.background._metricLabelBounds;d&&(h=d.x+d.width/2,g=d.y+d.height/2,i.w=d.width,i.h=d.height);var p=new t.OutputText(e.getCtx(),r,h,g);!n.metricLabel.style.getStyle("color")&&n.background._isDark&&n.metricLabel.style.setStyle("color","#CCCCCC"),p.setCSSStyle(n.metricLabel.style);var _=n.metricLabel.style.getFontSize();_||(_=l.calcLabelFontSize([r,s,o],p,i),p.setTextString(r),p.setFontSize(_)),p.alignCenter(),p.alignMiddle(),t.TextUtils.fitText(p,c,u,a)&&(e.__label=p)}},y._renderTickLabels=function(e,a,i){var n=e.getOptions(),r=t.Agent.isRightToLeft(e.getCtx());if(n.background.radius&&n.background.majorTickCount){var s=n.background._radius,o=n.min,h=n.max,g=n.background.majorTickCount,c=12,u=new t.Rectangle(b,f,i.w,i.h),d=n.metricLabel.style.getStyle("font-size");if(n.background._tickLabelHeight&&!d&&(u.h=n.background._tickLabelHeight),n.background._tickLabelWidth&&!d&&(u.w=n.background._tickLabelWidth),!d){var p=new t.OutputText(e.getCtx(),"",b,f);c=l.calcLabelFontSize([l.formatTickLabelValue(n.max,e),l.formatTickLabelValue(n.min,e)],p,u)}for(var _=0;_<g;_++){var m=o+Math.abs(h-o)*_/(g-1);r&&(m=o+Math.abs(h-o)*(g-1-_)/(g-1));var v=l.formatTickLabelValue(m,e),C=y._getRotation(e,m),S=y._getBackgroundAnchorPoint(e,i),b=S.x+s*Math.cos(C-Math.PI/2),f=S.y+s*Math.sin(C-Math.PI/2);p=new t.OutputText(e.getCtx(),v,b,f);!n.tickLabel.style.getStyle("color")&&n.background._isDark&&n.tickLabel.style.setStyle("color","#CCCCCC"),p.setCSSStyle(n.tickLabel.style),n.tickLabel.style.getStyle("font-size")||p.setFontSize(c),p.alignCenter(),p.alignMiddle(),t.TextUtils.fitText(p,u.w+.5,u.h+.5,a)}}};var m=function(t){this.Init(t)};t.Obj.createSubclass(m,t.Container),m.prototype.setAngle=function(e){var a=new t.Matrix;a.rotate(e),this.setMatrix(a),this._angleRads=e},m.prototype.getAnimationParams=function(){return[this._angleRads]},m.prototype.setAnimationParams=function(t){t&&1==t.length&&this.setAngle(t[0])},t.RatingGauge=function(){},t.Obj.createSubclass(t.RatingGauge,e),t.RatingGauge.newInstance=function(e,a,i){var n=new t.RatingGauge;return n.Init(e,a,i),n},t.RatingGauge.prototype.Init=function(e,a,i){t.RatingGauge.superclass.Init.call(this,e,a,i),this.Defaults=new v},t.RatingGauge.prototype.SetOptions=function(e){(e=t.JsonUtils.clone(e)).changedState&&(e.changedState.className&&(e.changedState.svgClassName=e.changedState.className),e.changedState.style&&(e.changedState.svgStyle=e.changedState.style)),e.hoverState&&(e.hoverState.className&&(e.hoverState.svgClassName=e.hoverState.className),e.hoverState.style&&(e.hoverState.svgStyle=e.hoverState.style)),e.selectedState&&(e.selectedState.className&&(e.selectedState.svgClassName=e.selectedState.className),e.selectedState.style&&(e.selectedState.svgStyle=e.selectedState.style)),e.unselectedState&&(e.unselectedState.className&&(e.unselectedState.svgClassName=e.unselectedState.className),e.unselectedState.style&&(e.unselectedState.svgStyle=e.unselectedState.style)),this.getCtx().isCustomElement()&&(e.readOnly=e.readonly),t.RatingGauge.superclass.SetOptions.call(this,this.Defaults.calcOptions(e))},t.RatingGauge.prototype.Render=function(e,a,i){var n=this.Options.__layout.outerGap,r=this.Options.max,s="vertical"==this.Options.orientation,o=this.Options.selectedState.source,l="none"!=this.Options.preserveAspectRatio;if(o&&l){t.ImageLoader.loadImage(this.getCtx(),this.Options.selectedState.source,t.Obj.createCallback(this,function(o){if(t.Agent.isPlatformIE()&&11==t.Agent.getVersion()&&o&&0==o.width&&0==o.height&&(o.width=1,o.height=1),o&&o.width&&o.height){var l=o.width/o.height;this.__shapeWidth=s?Math.min(a-2*n,(i-2*n)*l/r):Math.min((i-2*n)*l,(a-2*n)/r),this.__shapeHeight=this.__shapeWidth/l,this.__bounds=s?new t.Rectangle(n,(i-this.__shapeHeight*r)/2,a-2*n,this.__shapeHeight*r):new t.Rectangle((a-this.__shapeWidth*r)/2,n,this.__shapeWidth*r,i-2*n),S.render(this,e,a,i)}}))}else l?(this.__shapeWidth=s?Math.min(a-2*n,(i-2*n)/r):Math.min(i-2*n,(a-2*n)/r),this.__shapeHeight=this.__shapeWidth):(this.__shapeWidth=s?a-2*n:(a-2*n)/r,this.__shapeHeight=s?(i-2*n)/r:i-2*n),this.__bounds=s?new t.Rectangle(n,(i-this.__shapeHeight*r)/2,a-2*n,this.__shapeHeight*r):new t.Rectangle((a-this.__shapeWidth*r)/2,n,this.__shapeWidth*r,i-2*n),S.render(this,e,a,i)},t.RatingGauge.prototype.__getLogicalObject=function(){var e=this.Options.tooltip,a=e?e.renderer:null,i=o.getColor(this);if(a){var n={component:this.Options._widgetConstructor,label:l.getFormattedMetricLabel(this.Options.value,this),color:i};return new t.CustomDatatipPeer(this.getCtx().getTooltipManager(),a,i,n)}return new C(this)},t.RatingGauge.prototype.GetValueAt=function(e,a){var i="vertical"==this.Options.orientation?this.__shapeHeight:this.__shapeWidth;if(n.hasData(this)){if("vertical"==this.Options.orientation)a=Math.max(Math.min(a,this.__bounds.y+this.__bounds.h),this.__bounds.y),r=Math.max((this.__bounds.y+this.__bounds.h-a)/i,this.Options.min);else{e=Math.max(Math.min(e,this.__bounds.x+this.__bounds.w),this.__bounds.x);var r=0;r=t.Agent.isRightToLeft(this.getCtx())?Math.max((this.__bounds.x+this.__bounds.w-e)/i,this.Options.min):Math.max((e-this.__bounds.x)/i,this.Options.min)}return l.adjustForStep(this.Options,r)}return null},t.RatingGauge.prototype.__processHoverEnd=function(e,a){this.__updateClipRects(this.Options.value,"render"),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this.Options.value,this.Options.value,!1))},t.RatingGauge.prototype.__processValueChangeStart=function(t,e){this.__processValueChangeMove(t,e)},t.RatingGauge.prototype.__processValueChangeMove=function(e,a){var i=this.GetValueAt(e,a);this.__updateClipRects(i,"hover"),this.dispatchEvent(t.EventFactory.newValueChangeEvent(this.Options.value,i,!1))},t.RatingGauge.prototype.__processValueChangeEnd=function(e,a){var i=this.Options.value;this.Options.value=this.GetValueAt(e,a),this.Options.changed=!0,this.render(),this.dispatchEvent(t.EventFactory.newValueChangeEvent(i,this.Options.value,!1)),this.dispatchEvent(t.EventFactory.newValueChangeEvent(i,this.Options.value,!0))},t.RatingGauge.prototype.__updateClipRects=function(e,a,i){if(n.hasData(this)){i||(i=this._container);var r=t.Agent.isRightToLeft(this.getCtx()),s="vertical"==this.Options.orientation,o=s?this.__shapeHeight:this.__shapeWidth,l=0,h=(e=Math.max(Math.min(e,this.Options.max),0))*o,g=e*o;if("render"==a&&(l=e*o,h=0),s){var c=i.getChildAt(0);(d=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y,this.__bounds.w,this.__bounds.h-g),c.setClipPath(d);var u=i.getChildAt(1);if((p=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y+this.__bounds.h-l,this.__bounds.w,l),u.setClipPath(p),_=i.getChildAt(2))(y=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y+this.__bounds.h-h,this.__bounds.w,h),_.setClipPath(y)}else if(r){c=i.getChildAt(0);(d=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y,this.__bounds.w-g,this.__bounds.h),c.setClipPath(d);u=i.getChildAt(1);if((p=new t.ClipPath).addRect(this.__bounds.x+this.__bounds.w-g,this.__bounds.y,l,this.__bounds.h),u.setClipPath(p),_=i.getChildAt(2))(y=new t.ClipPath).addRect(this.__bounds.x+this.__bounds.w-g,this.__bounds.y,h,this.__bounds.h),_.setClipPath(y)}else{var d,c=i.getChildAt(0);(d=new t.ClipPath).addRect(this.__bounds.x+g,this.__bounds.y,this.__bounds.w-g,this.__bounds.h),c.setClipPath(d);var p,_,y,u=i.getChildAt(1);if((p=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y,l,this.__bounds.h),u.setClipPath(p),_=i.getChildAt(2))(y=new t.ClipPath).addRect(this.__bounds.x,this.__bounds.y,h,this.__bounds.h),_.setClipPath(y)}this.UpdateAriaLiveValue(i,e)}},t.RatingGauge.prototype.__getRatingGaugeItem=function(t){return this._container.getChildAt(0).getChildAt(t)},t.RatingGauge.prototype.CreateEventManager=function(){return new b(this)};var v=function(){this.Init({skyros:v.VERSION_1,alta:v.SKIN_ALTA})};t.Obj.createSubclass(v,i),v.SKIN_ALTA={unselectedState:{shape:"star",color:"#C4CED7",borderColor:null},selectedState:{shape:"star",color:"#F8C15A",borderColor:null},hoverState:{shape:"star",color:"#007CC8",borderColor:null},changedState:{shape:"star",color:"#ED2C02",borderColor:null}},v.VERSION_1={min:0,max:5,orientation:"horizontal",unselectedState:{shape:"star",color:"#F2F2F2",borderColor:"#B6B6B6"},selectedState:{shape:"star",color:"#F8C15A",borderColor:"#F5A700"},hoverState:{shape:"star",color:"#66A7DA",borderColor:"#4A86C5"},changedState:{shape:"star",color:"#F8C15A",borderColor:"#959595"},preserveAspectRatio:"meet",step:1};var C=function(t){this.Init(),this._gauge=t};t.Obj.createSubclass(C,t.SimpleObjPeer),C.prototype.getDatatip=function(t,e,a){var i,r=this._gauge.getOptions();i=this._gauge.getEventManager().__isMouseEditing()?n.getValueThresholdIndex(this._gauge,this._gauge.GetValueAt(e,a)):n.getValueThresholdIndex(this._gauge);var s=n.getThreshold(this._gauge,i);return s&&s.shortDesc?s.shortDesc:r.shortDesc};var S=new Object;t.Obj.createSubclass(S,t.Obj),S.render=function(e,a,i,r){if(n.hasData(e)){var s=e.getOptions(),o=n.getValueThresholdIndex(e),h=n.getThreshold(e,o),g=s.selectedState.color,c=s.changedState.color,u=s.selectedState.borderColor,d=s.changedState.borderColor;h&&h.color&&(g=h.color,c=h.color),h&&h.borderColor&&(u=h.borderColor,d=h.borderColor);var p={value:0,type:s.unselectedState.shape,color:s.unselectedState.color,borderColor:s.unselectedState.borderColor,visualEffects:s.visualEffects,source:s.unselectedState.source,svgClassName:s.unselectedState.svgClassName,svgStyle:s.unselectedState.svgStyle},_={value:0,type:s.selectedState.shape,color:g,borderColor:u,visualEffects:s.visualEffects,source:s.selectedState.source,svgClassName:s.selectedState.svgClassName,svgStyle:s.selectedState.svgStyle},y={value:0,type:s.changedState.shape,color:c,borderColor:d,visualEffects:s.visualEffects,source:s.changedState.source,svgClassName:s.changedState.svgClassName,svgStyle:s.changedState.svgStyle},m={value:0,type:s.hoverState.shape,color:s.hoverState.color,borderColor:s.hoverState.borderColor,visualEffects:s.visualEffects,source:s.hoverState.source,svgClassName:s.hoverState.svgClassName,svgStyle:s.hoverState.svgStyle};"dot"==s.unselectedState.shape&&(p.type="circle",p.visualEffects="none",p.size=.05),S._createShapes(e,a,p),S._createShapes(e,a,s.changed?y:_),s.readOnly||S._createShapes(e,a,m),e.__updateClipRects(s.value,"render",a)}else l.renderEmptyText(e,a,new t.Rectangle(0,0,i,r))},S._createShapes=function(e,a,i){var n=e.getCtx(),r=new t.Container(n);a.addChild(r);for(var s=e.getOptions(),o=e.__bounds,l=e.__shapeWidth,h=e.__shapeHeight,g=t.Agent.isPlatformIE()?null:S._createShape(n,0,0,l,h,i,s),c=0;c<s.max;c++){var u,d;if("vertical"==s.orientation?(u=o.x+o.w/2-l/2,d=o.y+o.h-(c+1)*h):t.Agent.isRightToLeft(n)?(u=o.x+o.w-(c+1)*l,d=o.y+o.h/2-h/2):(u=o.x+c*l,d=o.y+o.h/2-h/2),t.Agent.isPlatformIE()){var p=S._createShape(n,u,d,l,h,i,s);p&&r.addChild(p)}else if(g){var _=new t.Use(n,u,d,g);r.addChild(_)}}},S._createShape=function(e,a,i,n,r,s,o){var l;return s.source?(l=new t.ImageMarker(e,a+n/2,i+r/2,n,r,null,s.source)).setPreserveAspectRatio("none"):"none"!=s.type&&(l=t.LedGauge.newInstance(e,null,null,!0),0!=a&&0!=i&&l.setTranslate(a,i),l.render(s,n,r)),l&&(l.setClassName(o.svgClassName),l.setStyle(o.svgStyle)),l};var b=function(t){this.Init(t.getCtx(),t.dispatchEvent,t),this._gauge=t};t.Obj.createSubclass(b,r),b.prototype.OnMouseOver=function(t){if(!1===this._gauge.getOptions().readOnly){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processValueChangeStart(e.x,e.y),this.IsMouseEditing=!0}b.superclass.OnMouseOver.call(this,t)},b.prototype.OnMouseOut=function(t){if(!1===this._gauge.getOptions().readOnly){var e=this.GetRelativePosition(t.pageX,t.pageY);this._gauge.__processHoverEnd(e.x,e.y),this.IsMouseEditing=!1}b.superclass.OnMouseOut.call(this,t)},b.prototype.OnMouseMove=function(t){var e=this.GetRelativePosition(t.pageX,t.pageY);!1!==this._gauge.getOptions().readOnly||this.IsMouseEditing||this._gauge.getOptions().value==this._gauge.GetValueAt(e.x,e.y)||(this.IsMouseEditing=!0),b.superclass.OnMouseMove.call(this,t)},b.prototype.OnMouseDown=function(t){r.superclass.OnMouseDown.call(this,t)},b.prototype.ProcessKeyboardEvent=function(t){return this.IsMouseEditing=!1,b.superclass.ProcessKeyboardEvent.call(this,t)},b.prototype.IsShowingTooltipWhileEditing=function(){return!0},t.exportProperty(t,"DialGauge",t.DialGauge),t.exportProperty(t,"LedGauge",t.LedGauge),t.exportProperty(t,"RatingGauge",t.RatingGauge),t.exportProperty(t,"StatusMeterGauge",t.StatusMeterGauge),t.exportProperty(t.DialGauge,"DialGauge",t.DialGauge),t.exportProperty(t.DialGauge,"LedGauge",t.LedGauge),t.exportProperty(t.DialGauge,"RatingGauge",t.RatingGauge),t.exportProperty(t.DialGauge,"StatusMeterGauge",t.StatusMeterGauge),t.exportProperty(e.prototype,"getAutomation",e.prototype.getAutomation),t.exportProperty(e.prototype,"destroy",e.prototype.destroy),t.exportProperty(e.prototype,"render",e.prototype.render),t.exportProperty(a.prototype,"getDomElementForSubId",a.prototype.getDomElementForSubId),t.exportProperty(a.prototype,"getValue",a.prototype.getValue),t.exportProperty(a.prototype,"getMetricLabel",a.prototype.getMetricLabel),t.LedGaugeRenderer=g}(dvt);
  return dvt;
});
