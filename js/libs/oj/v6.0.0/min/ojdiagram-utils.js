/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define([],function(){var t=function(){};return t.getLayout=function(o){return function(e){var n;if(o.nodes&&e.getNodeCount()>0){var a=t._dataArrayToMap(o.nodes);n=o.nodeDefaults&&o.nodeDefaults.labelLayout?o.nodeDefaults.labelLayout:null;for(var i=0;i<e.getNodeCount();i++){var l=e.getNodeByIndex(i),s=a[l.getId()];t._positionChildNodes(l.getChildNodes(),s?s.nodes:null,e,n),t._positionNodeAndLabel(l,s,e,n)}}if(o.links&&e.getLinkCount()>0){var r=t._dataArrayToMap(o.links),u=o.linkDefaults&&o.linkDefaults.path?o.linkDefaults.path:null;n=o.linkDefaults&&o.linkDefaults.labelLayout?o.linkDefaults.labelLayout:null;for(var d=0;d<e.getLinkCount();d++){var f=e.getLinkByIndex(d),L=r[f.getId()];L&&L.path?f.setPoints(L.path):u&&u instanceof Function&&f.setPoints(u(e,f)),L&&L.coordinateSpace&&f.setCoordinateSpace(L.coordinateSpace),L&&L.labelLayout?t._setLabelPosition(f,L.labelLayout):n&&n instanceof Function&&t._setLabelPosition(f,n(e,f))}}if(o.viewport){var y=o.viewport;y instanceof Function?e.setViewport(y(e)):e.setViewport(y)}}},t._dataArrayToMap=function(t){var o={};if(t)for(var e=0;e<t.length;e++)o[t[e].id]=t[e];return o},t._positionChildNodes=function(o,e,n,a){if(o&&e)for(var i=t._dataArrayToMap(e),l=0;l<o.length;l++){var s=o[l],r=i[s.getId()];t._positionChildNodes(s.getChildNodes(),r?r.nodes:null,n,a),t._positionNodeAndLabel(s,r,n,a)}},t._positionNodeAndLabel=function(o,e,n,a){o&&e&&(o.setPosition({x:e.x,y:e.y}),e.labelLayout?t._setLabelPosition(o,e.labelLayout):a&&a instanceof Function?t._setLabelPosition(o,a(n,o)):a&&t._setLabelPosition(o,a,o.getPosition()))},t._setLabelPosition=function(t,o,e){var n=e||{x:0,y:0};t.setLabelPosition({x:o.x+n.x,y:o.y+n.y});var a=o.rotationPointX,i=o.rotationPointY;isNaN(a)||isNaN(i)||t.setLabelRotationPoint({x:a+n.x,y:i+n.y}),t.setLabelRotationAngle(o.angle),t.setLabelHalign(o.halign),t.setLabelValign(o.valign)},t});