/**
 * @license
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";define(["ojs/ojcore","knockout","ojs/ojlogger","ojs/ojcontext","ojs/ojkoshared"],function(n,e,o,r){!function(){n.__KO_CUSTOM_BINDING_PROVIDER_INSTANCE.registerPreprocessor("oj-bind-dom",function(e){var o,r="ko _ojBindDom_:",t=function(e){if(null!=e){var o=n.__AttributeUtils.getExpressionInfo(e).expr;return null==o&&(o="'"+e+"'"),o}return null}(e.getAttribute("config"));t&&(r+=t);var i=document.createComment(r),d=document.createComment("/ko");o=[i];var s=e.parentNode;for(s.insertBefore(i,e);e.childNodes.length>0;){var u=e.childNodes[0];s.insertBefore(u,e),o.push(u)}return o.push(d),s.replaceChild(d,e),o})}(),e.bindingHandlers._ojBindDom_={init:function(n,t,i,d,s){var u,l;function a(t){l||(l=r.getContext(n.parentNode).getBusyContext().addBusyState({description:"oj-bind-dom is waiting on config Promise resolution"})),t.then(function(r){if(t===u)try{e.virtualElements.setDomNodeChildren(n,r.view||[]);var i=s.createChildContext(r.data,void 0,function(n){n.$parent=null,n.$parentContext=null,n.$parents=null});e.applyBindingsToDescendants(i,n)}catch(n){o.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",n)}finally{c()}},function(n){c(),o.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",n)})}function c(){l&&(l(),l=null)}return e.computed(function(){a(u=Promise.resolve(e.utils.unwrapObservable(t())))},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings._ojBindDom_=!0});